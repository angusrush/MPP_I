\documentclass[main.tex]{subfiles}

\begin{document}

\section*{Introduction}
\label{sec:introduction}

The aim of this work is to prove the following theorem.

\begin{theorem*}
  Let $\category{C}$ and $\category{D}$ be quasicategories admitting all pullbacks, and let $p\colon \category{C} \to \category{D}$ be a bicartesian fibration which preserves pullbacks. Further suppose that the $p$-cocartesian morphisms of $\category{C}$ are compatible with pullbacks in the sense of \hyperref[thm:span_of_bicartesian_fibration_is_bicartesian_fibration]{Theorem~\ref*{thm:span_of_bicartesian_fibration_is_bicartesian_fibration}}. Then the functor $\pi\colon \Span(\category{C}) \to \Span(\category{D})$ is a bicartesian fibration of quasicategories.
\end{theorem*}

This is a special case of a theorem of Barwick \cite{spectralmackeyfunctors1}. There, Barwick proves a stronger result, which treats the weaker case of inner fibrations separately, and allows conditions on the legs of the spans. Barwick's proof is explicit, constructing horn fillings by enumerating the necessary simplices, and arguing one-by-one why each filling is possible. This is an impressive feat of simplicial combinatorics, but provides little intuition for why the result might be true.

Our proof is more homotopy-theoretic in character, relying on the fact that for any quasi-category $\category{C}$ with pullbacks, the infinity-category of spans in $\category{C}$ has a a natural incarnation as a complete Segal space $\SPAN(\category{C})$; the quasicategory $\Span(\category{C})$ is then the `first row' of this complete Segal space. We define a notion of cocartesian fibration between complete Segal spaces, and show that under mild assumptions, any such cocartesian fibration gives a cocartesian fibration between first rows. The readily available homotopical data available in complete Segal spaces allow us to define cocartesian morphisms purely via a condition on 2-simplices, where the combinatorics of horn filling is more manageable.

Our definition of a cocartesian fibration between Segal spaces is not new, although the form in which it is presented is original. The definition was first (to our knowledge) written down by Rasekh in \cite{rasekhcartesianfibrations}. There, Rasekh defines a model structure whose fibrant objects model cocartesian fibrations between Segal spaces. In defining this model structure, it is necessary to control the which morphisms one wants to be cocartesian, and Rasekh solves this problem by adding an extra simplicial dimension; the model structure for cocartesian fibrations defined there is thus a model structure on slice categories of trisimplicial sets.

In this work we restrict our attention to cocartesian fibrations between complete Segal spaces. This allows us to approach the problem of controlling cocartesian morphisms differently, by introducing a marking. This method is much closer to that used to work with cocartesian fibrations in \cite{highertopostheory}, and has the advantage that the many of the results proved there can be leveraged in explicit calculations. In particular, we provide a definition of a cocartesian fibration between complete Segal spaces to which Rasekh's definition reduces in the case that both the domain and codomain are complete Segal spaces.

This work consists of two sections. In \hyperref[sec:cocartesian_fibrations_between_complete_segal_spaces]{Section~\ref*{sec:cocartesian_fibrations_between_complete_segal_spaces}}, after a review of some material in \cite{qcats_vs_segal_spaces}, most notably the box functor $- \square -$ and its adjoints, we define marked analogs of these, and show that analogous results hold. We then define, given a Reedy fibration $f\colon X \to Y$ between complete Segal spaces, a condition for

\section{Cocartesian fibrations between complete Segal spaces}
\label{sec:cocartesian_fibrations_between_complete_segal_spaces}

\subsection{A review of bisimplicial sets}
\label{ssc:a_review_of_bisimplicial_sets}

In this section we review the basic theory of bisimplicial sets as laid out in \cite{qcats_vs_segal_spaces}. This is mainly to fix notation.

Bisimplicial sets can be defined in two equivalent ways:
\begin{itemize}
  \item As functors $\D\op \to \SSet$

  \item As functors $(\D\op)^{2} \to \Set$.
\end{itemize}
In the former case, we think of a bisimplicial set $X$ as an $\N$-indexed collection of simplicial sets $X_{n}$; in the latter, we think of a bisimplicial set as an $\N \times \N$-indexed collection of sets $X_{mn}$. Both points of view are useful, and we will rely on both of them. For this reason, we fix the following convention: with the second point of view in mind, we imagine a bisimplicial set $X$ as a collection of sets, each located at an integer lattice points of the first quadrant of the plane, where the first coordinate increases in the $x$-direction and the second coordinate increases in the $y$-direction. Thus, the $n$th row of $X$ is the simplicial set $X_{\bullet n}$, and the $m$th column of $X$ is the simplicial set $X_{m \bullet}$. When we think of bisimplicial sets as $\N$-indexed collections of simplicial sets $X_{n}$, we mean by $X_{n}$ the $n$th \emph{column} of $X$; that is, $X_{n} = X_{\bullet n}$.

\begin{equation*}
  \begin{tikzcd}[row sep=small, column sep=small]
    & \
    \arrow[dddddd, leftarrow, dotted, at start]
    \\
    && X_{03}
    & X_{13}
    & X_{23}
    & X_{33}
    \\
    && X_{02}
    & X_{12}
    & X_{22}
    & X_{32}
    \\
    && X_{01}
    & X_{11}
    & X_{21}
    & X_{31}
    \\
    && X_{00}
    & X_{10}
    & X_{20}
    & X_{30}
    \\
    \
    \arrow[rrrrrr, dotted, at end]
    &&&&&& \
    \\
    & \
  \end{tikzcd}
\end{equation*}

If $X$ is Reedy fibrant, then each simplicial set $X_{n}$ is a Kan complex. Later, when we are interested in complete Segal spaces, we will interpret $X_{n}$ as the space of $n$-simplices of $X$.

\begin{definition}
  Define a functor $- \square -\colon \SSet \times \SSet \to \SSSet$ by the formula
  \begin{equation*}
    (X, Y) \mapsto X \square Y,\qquad (X \square Y)_{mn} = X_{m} \times Y_{n}.
  \end{equation*}
  We will call this functor the \defn{box functor.}
\end{definition}

Note that by the Yoneda lemma, maps $\Delta^{m} \square \Delta^{n} \to X$ are the same as elements of $X_{mn}$.

In \cite{qcats_vs_segal_spaces}, the theory of such bifunctors is explored. The basic results that we will need are reproduced in \hyperref[sss:divisibility_of_bifunctors]{Appendix~\ref*{sss:divisibility_of_bifunctors}}.

We provide a partial proof of the following result because we will need to refer to it later.
\begin{proposition}
  \label{prop:bijection_exhibiting_box_divisibility}
  The box functor is \emph{divisible on the left.} This means that for each simplicial set $A$, there is an
  \begin{equation*}
    A \square -\colon \SSet \longleftrightarrow \SSSet : A \backslash -,
  \end{equation*}
  where an $n$-simplex of the simplicial set $A \backslash X$ is a map $A \square \Delta^{n} \to X$.

  Similarly, the box functor is \emph{divisible on the right.} This means that for each simplicial set $B$ there is an adjunction
  \begin{equation*}
    - \square B\colon \SSet \longleftrightarrow \SSSet : - / B.
  \end{equation*}
\end{proposition}
\begin{proof}
  We prove divisibility on the left; because the Cartesian product is symmetric, divisibility on the right is identical. We do this by explicitly exhibiting a natural bijection
  \begin{equation*}
    \begin{tikzcd}
      \Hom_{\SSSet}(A \square B, X) \cong \Hom_{\SSet}(B, A \backslash X).
    \end{tikzcd}
  \end{equation*}

  Define a map
  \begin{equation*}
    \Phi\colon \Hom_{\SSSet}(A \square B, X) \to \Hom_{\SSet}(B, A \backslash X)
  \end{equation*}
  by sending a map $f\colon A \square B \to X$ to the map $\tilde{f}\colon B \to A \backslash X$ which sends an $n$-simplex $b \in B_{n}$ to the composition
  \begin{equation*}
    \begin{tikzcd}
      A \square \Delta^{n}
      \arrow[r, "{(\id, b)}"]
      & A \square B
      \arrow[r, "f"]
      & X
    \end{tikzcd}.
  \end{equation*}

  Before we define our map in the other direction, we need an intermediate result. Define a map $\ev\colon A \square (A \backslash X) \to X$ level-wise by taking $(a, \sigma) \in A_{m} \times (A \backslash X)_{n}$ to
  \begin{equation*}
    \sigma_{mn}(a, \id_{\Delta^{n}}) \in X_{mn}.
  \end{equation*}
  Then define a map
  \begin{equation*}
    \Psi\colon \Hom_{\SSet}(B, A \backslash X) \to \Hom_{\SSSet}(A \square B, X)
  \end{equation*}
  sending a map $g\colon B \to A \backslash X$ to the composition
  \begin{equation*}
    \begin{tikzcd}
      A \square B
      \arrow[r, "{(\id, g)}"]
      & A \square (A \backslash X)
      \arrow[r, "\ev"]
      & X
    \end{tikzcd}.
  \end{equation*}

  The maps $\Phi$ and $\Psi$ are mutually inverse, and provide the necessary natural bijection.

  The other bijection is defined analogously, so we only fix notation which we will need later. We will call the mutually inverse maps
  \begin{equation*}
    \Phi'\colon \Hom_{\SSSet}(A \square B, X) \to \Hom_{\SSet}(A, X / B)
  \end{equation*}
  and
  \begin{equation*}
    \Psi'\colon \Hom_{\SSet}(A, X / B) \to \Hom_{\SSSet}(A \square B, X),
  \end{equation*}
  where in defining $\Psi'$ we use a map $\ev'\colon (X / B) \square B \to X$ sending
  \begin{equation*}
    (\phi\colon \Delta^{m} \square B \to X, b \in B_{n}) \mapsto \phi_{mn}(\id_{\Delta^{m}}, b).\qedhere
  \end{equation*}
\end{proof}

The functors $-\backslash X$ and $X / -$ give us access, respectively, to the categorical and the spatial directions in $X$.

The simplicial set $\Delta^{m} \backslash X$ is the $m$th column of $X$. If $X$ is a Segal space, this is the space of $m$-simplices of $X$, which we have agreed to call $X_{m}$. The simplicial set $X / \Delta^{n}$ is the $n$th row of $X$. In particular $X / \Delta^{0}$ is the zeroth row of $X$. In \cite{qcats_vs_segal_spaces}, it is shown that if $f\colon X \to Y$ is a Reedy fibration between complete Segal spaces, then $f / \Delta^{0}\colon X / \Delta^{0} \to Y / \Delta^{0}$ is an inner fibration between quasicategories.

\hyperref[prop:bijection_exhibiting_box_divisibility]{Proposition~\ref*{prop:bijection_exhibiting_box_divisibility}}, together with the fact that $\SSet$ $\SSSet$ are finitely complete and cocomplete, implies all of the results of \hyperref[sss:divisibility_of_bifunctors]{Appendix~\ref*{sss:divisibility_of_bifunctors}} apply to the box functor. In the notation found there, we can give a compact formulation of the definition of a Reedy fibration which we will use repeatedly.

\begin{definition}
  \label{def:reedy_fibration}
  Let $f\colon X \to Y$ be a map between bisimplicial sets. The map $f$ is a \defn{Reedy fibration} if either of the following equivalent conditions hold.
  \begin{itemize}
    \item For each monomorphism $u\colon A \to A'$, the map $\langle u \backslash f \rangle$ is a Kan fibration.

    \item For each anodyne map $v\colon B \to B'$, the map $\langle f / v \rangle$ is a trivial Kan fibration.
  \end{itemize}
\end{definition}

We will also make use of the following fact.

\begin{theorem}[\cite{qcats_vs_segal_spaces}]
  \label{thm:inner_fibration_between_quasicategories}
  If $f\colon X \to Y$ is a Reedy fibration between Segal spaces, then for any monomorphism of simplicial sets $v$, the map $\langle f / v \rangle$ is an inner fibration.
\end{theorem}


\subsection{Marked bisimplicial sets}
\label{ssc:marked_bisimplicial_sets}

\begin{definition}
  A \defn{marked bisimplicial set} $(X, \mathcal{E})$ is a bisimplicial set $X$ together with a distinguished subset $\mathcal{E} \subseteq X_{10}$ containing all degenerate edges, i.e.\ all edges in the image of $s_{0}\colon X_{00} \to X_{10}$. Equivalently, a marked bisimplicial set is bisimplicial set $X$ together with a marking $\mathcal{E}$ on the simplicial set $X / \Delta^{0}$.
\end{definition}

\begin{definition}
  For a marked simplicial set $A$ and an unmarked simplicial set $B$, define a marking on the bisimplicial set $A \square B$ as follows: a simplex $(a, b) \in A_{1} \times B_{0}$ is marked if and only if $a$ is marked in $A$.
\end{definition}

This construction gives us a functor
\begin{equation*}
  - \square -  \colon \SSet^{+} \times \SSet \to \SSSet^{+}.
\end{equation*}

Our first order of business is to generalize the results of \cite{qcats_vs_segal_spaces} summarized in \hyperref[sss:divisibility_of_bifunctors]{Section~\ref*{sss:divisibility_of_bifunctors}} to the marked case. We will first show that the above functor is divisible on the left and on the right.

\begin{notation}
  For any marked simplicial set $A$, denote the underlying unmarked simplicial set by $\mathring{A}$. Similarly, for any marked bisimplicial set $X$, denote the underlying unmarked bisimplicial set by $\mathring{X}$.
\end{notation}

\begin{definition}
  Let $A$ denote a marked simplicial set, $B$ an unmarked simplicial set, and $X$ a marked bisimplicial set.
  \begin{itemize}
    \item Define an unmarked simplicial set $A \backslash X$ level-wise by
      \begin{equation*}
        (A \backslash X)_{n} = \Hom_{\SSSet^{+}}(A \square \Delta^{n}, X).
      \end{equation*}

    \item Define a marked simplicial set $X / B$ as follows. The underlying simplicial set is the same as $\mathring{X} / \mathring{B}$, and a 1-simplex $\Delta^{1} \to X / B$ is marked if and only if the corresponding map $\Delta^{1} \square B \to \mathring{X}$ of unmarked bisimplicial sets comes from a map of marked bisimplicial sets $(\Delta^{1})^{\sharp} \square B \to X$.
  \end{itemize}
\end{definition}

\begin{example}
  For any unmarked simplicial set $A$ and marked bisimplicial set $X$, there is an isomorphism
  \begin{equation*}
    A^{\flat} \backslash X \cong A \backslash \mathring{X}.
  \end{equation*}
  Similarly, for any unmarked bisimplicial set $Y$ and marked simplicial set $B$, there is an isomorphism
  \begin{equation*}
    B \backslash Y^{\sharp} \cong \mathring{B} \backslash Y.
  \end{equation*}
\end{example}

\begin{proposition}
  We have the following adjunctions.
  \begin{enumerate}
    \item For each marked simplicial set $A \in \SSet^{+}$ there is an adjunction.
      \begin{equation*}
        A \square -\colon \SSet \longleftrightarrow \SSSet^{+} : A \backslash -
      \end{equation*}

    \item For each unmarked simplicial set $B \in \SSet$ there is an adjunction.
      \begin{equation*}
        - \square B\colon \SSet^{+} \longleftrightarrow \SSSet^{+} : - / B.
      \end{equation*}
  \end{enumerate}
\end{proposition}
\begin{proof}
  We start with the first, fixing a marked simplicial set $A$, an unmarked simplicial set $B$, and a marked bisimplicial set $X$. We have inclusions
  \begin{equation*}
    \Hom_{\SSSet^{+}}(A \square B, X) \overset{i_{0}}{\subseteq} \Hom_{\SSSet}(\mathring{A} \square B, \mathring{X})
  \end{equation*}
  and
  \begin{equation*}
    \Hom_{\SSet}(B, A \backslash X) \overset{i_{1}}{\subseteq} \Hom_{\SSet}(B, \mathring{A} \backslash \mathring{X}).
  \end{equation*}
  We have a natural bijection between the right-hand sides of the above inclusions given by the maps $\Phi$ and $\Psi$ of \hyperref[prop:bijection_exhibiting_box_divisibility]{Proposition~\ref*{prop:bijection_exhibiting_box_divisibility}}. To show that there is a natural bijection between the subsets, it suffices to show that $\Phi$ and $\Psi$ restrict to maps between the subsets.

  To this end, suppose we have a map of bimarked simplicial sets $f\colon A \square B \to X$. The inclusion $i_{0}$ forgets the markings, sending this to the map
  \begin{equation*}
    \mathring{f}\colon \mathring{A} \square B \to \mathring{X}.
  \end{equation*}
  Under $\Phi$, this is taken to a map $\Phi(\mathring{f}) \colon B \to \mathring{A} \backslash \mathring{X}$. We would like to show that $\Phi(\mathring{f})$ factors through $A \backslash X$, giving a map $\tilde{f}\colon B \to A \backslash X$. The map $\Phi(\mathring{f})$ takes an $n$-simplex $b \in B_{n}$ to the composition
  \begin{equation*}
    \begin{tikzcd}
      \mathring{A} \square \Delta^{n}
      \arrow[r, "{(\id, b)}"]
      & \mathring{A} \square B
      \arrow[r, "\mathring{f}"]
      & \mathring{X}
    \end{tikzcd}.
  \end{equation*}
  We need to check that this is an $n$-simplex in $A \backslash X$, and not just $\mathring{A} \backslash \mathring{X}$, i.e.\ that it respects the markings on $A \square \Delta^{n}$ and $X$. That $(\id, b)$ respects the markings on $A \square \Delta^{n}$ and $A \square B$ is clear, and $\mathring{f}$ respects the markings on $A \square B$ and $X$ because $f$ is a map of marked simplicial sets by assumption. Thus $\Phi(f)$ restricts to a map $\tilde{f}\colon B \to A \backslash X$.

  Now suppose we have a map $g\colon B \to A \backslash X$. The inclusion $i_{1}$ takes this to the composition
  \begin{equation*}
    \begin{tikzcd}
      B
      \arrow[r, "g"]
      & A \backslash X
      \arrow[r, hook]
      & A\flt \backslash X \cong \mathring{A} \backslash \mathring{X},
    \end{tikzcd}
  \end{equation*}
  which we denote by $\mathring{g}$ by mild abuse of notation. Under $\Psi$, this is mapped to the composition
  \begin{equation*}
    \Psi(\mathring{g})\colon
    \begin{tikzcd}
      \mathring{A} \square B
      \arrow[r, "\id \times \mathring{g}"]
      & \mathring{A} \square (\mathring{A} \backslash \mathring{X})
      \arrow[r, "\ev"]
      & \mathring{X}.
    \end{tikzcd}
  \end{equation*}
  We need to check that this respects the markings on $A \square B$ and $X$, i.e.\ that for each marked simplex $a \in A_{1}$ and each $b \in B_{0}$, the element $\Psi(\mathring{g})_{10}(a, b)$ is marked in $X_{10}$. But $\Psi(\mathring{g})_{10}(a, b) = g(b)_{10}(a, \id_{\Delta^{0}})$, which is marked because $g$ lands in $A \backslash X$ by assumption. Thus, $\Psi(\mathring{g})$ descends to a map $\tilde{g}\colon A \square B \to X$.

  Now we show the other bijection. Unlike the unmarked case, because of the asymmetry of the marked box functor, this is not precisely the same as what we have just shown. Again we have inclusions
  \begin{equation*}
    \Hom_{\SSSet^{+}}(A \square B, X) \overset{j_{0}}{\subseteq} \Hom_{\SSSet}(\mathring{A} \square B, \mathring{X})
  \end{equation*}
  and
  \begin{equation*}
    \Hom_{\SSet^{+}}(A, B \backslash X) \overset{j_{1}}{\subseteq} \Hom_{\SSet}(\mathring{A}, B \backslash \mathring{X}),
  \end{equation*}
  and a bijection between the right-hand sides given by the maps $\Phi'$ and $\Psi'$ from \hyperref[prop:bijection_exhibiting_box_divisibility]{Proposition~\ref*{prop:bijection_exhibiting_box_divisibility}}. As before, suppose that
  \begin{equation*}
    f\colon A \square B \to X
  \end{equation*}
  is a map of marked bisimplicial sets. Under $j_{0}$, this is sent to $\mathring{f}\colon \mathring{A} \square B \to \mathring{X}$. Then $\Phi'(\mathring{f})\colon A \to X / B$ is defined by sending $\sigma \in A_{n}$ to the composition
  \begin{equation*}
    \begin{tikzcd}
      \Delta^{n} \square B
      \arrow[r, "{(\sigma, \id)}"]
      & \mathring{A} \square B
      \arrow[r, "\mathring{f}"]
      & \mathring{X}
    \end{tikzcd}.
  \end{equation*}
  We need to show that for each marked $a \in A_{1}$, the corresponding map
  \begin{equation*}
    \Phi'(\mathring{f})(a)\colon 
    \begin{tikzcd}
      \Delta^{1} \square B
      \arrow[r, "{(a, \id)}"]
      & \mathring{A} \square B
      \arrow[r, "\mathring{f}"]
      & \mathring{X}
    \end{tikzcd}
  \end{equation*}
  descends to a map of marked bisimplicial sets $\tilde{f}\colon (\Delta^{1})^{\sharp} \square B \to X$, and thus corresponds a marked $1$-simplex in to $X / B$. But that the first map has this property is clear because $a$ is marked by assumption, and the map $\mathring{f}$ has this property because $f$ is a map of marked simplicial sets by assumption.

  Now, let $g\colon A \to X / B$ be a map of marked simplicial sets. We need to check that the composition
  \begin{equation*}
    \Psi(\mathring{g})\colon 
    \begin{tikzcd}
      \mathring{A} \square B
      \arrow[r, "{(\mathring{g}, \id)}"]
      & (\mathring{X} / B) \square B
      \arrow[r, "\ev'"]
      & \mathring{X}
    \end{tikzcd}
  \end{equation*}
  takes marked edges to marked edges. Let $(a, b) \in A_{1} \times B_{0}$, with $a$ marked. This maps to
  \begin{equation*}
    (a, b) \mapsto (g(a), b) \mapsto g(a)_{10}(\id_{\Delta^{1}}, b) \in X_{10}.
  \end{equation*}
  By definition, $g(a)$ is a map of marked simplicial sets
  \begin{equation*}
    (\Delta^{1})^{\sharp} \square B \to X
  \end{equation*}
  which therefore sends $(\id_{\Delta^{1}}, b)$ to a marked edge in $X$ by assumption.
\end{proof}

This shows that the marked version of $\square$ is, in the language of \cite{qcats_vs_segal_spaces}, \emph{divisible on the left and on the right.} Thus, the results summarized in \hyperref[sss:divisibility_of_bifunctors]{Section~\ref*{sss:divisibility_of_bifunctors}} apply.

We will call an inclusion $B_{0} \hookrightarrow B$ of unmarked simplicial sets \emph{full} if it has the following property: an $n$-simplex $\sigma\colon \Delta^{n} \to B$ factors through $B_{0}$ if and only if each vertex of $\sigma$ factors through $B_{0}$. That is, any $n$-simplex in $B$ whose vertices belong to $B_{0}$ belongs to $B_{0}$.

\begin{lemma}
  For any marked simplicial set $A$ and marked bisimplicial set $X$, the simplicial set $A \backslash X$ is a Kan complex, and the inclusion $i\colon A \backslash X \hookrightarrow A^{\flat} \backslash X \cong \mathring{A} \backslash \mathring{X}$ is a full inclusion.
\end{lemma}
\begin{proof}
  We first show that the map $i$ is a full inclusion. The $n$-simplices of $A \backslash X$ are maps of marked simplicial sets $\tilde{\sigma}\colon A \square \Delta^{n} \to X$. A map of underlying bisimplicial sets gives a map of marked bisimplicial sets if and only if it respects the markings, i.e.\ if and only if for each $(a, i) \in A_{1} \times (\Delta^{n})_{0}$ with $a$ marked, $\tilde{\sigma}(a, i)$ is marked in $X$. This is equivalent to demanding that $\sigma|_{\Delta^{\{i\}}}$ belong to $A \backslash X$.

  To show that $A \backslash X$ is a Kan complex, we need to find dashed lifts below.
  \begin{equation*}
    \begin{tikzcd}
      \Lambda^{n}_{k}
      \arrow[r]
      \arrow[d, hook]
      & A \backslash X
      \\
      \Delta^{n}
      \arrow[ur, dashed]
    \end{tikzcd}.
  \end{equation*}
  For $n = 1$, the horn inclusion is of the form $\Delta^{0} \hookrightarrow \Delta^{1}$, and we can take the lift to be degenerate. For $n \geq 2$, we can augment our diagram as follows.
  \begin{equation*}
    \begin{tikzcd}
      \Lambda^{n}_{k}
      \arrow[r]
      \arrow[d, hook]
      & A \backslash X
      \arrow[r]
      & A^{\flat} \backslash X
      \\
      \Delta^{n}
      \arrow[urr, dashed]
    \end{tikzcd}.
  \end{equation*}
  Since $A^{\flat} \backslash X$ is a Kan complex, we can always find such a dashed lift. The inclusion $\Lambda^{n}_{k} \hookrightarrow \Delta^{n}$ is surjective on vertices, so our lift factors through $A \backslash X$.
\end{proof}

\begin{definition}
  Let $(X, \mathcal{E})$ be a marked bisimplicial set. We will say that $\mathcal{E}$ \defn{respects path components} if it has the following property: for any map $\Delta^{1} \to X_{1}$ representing an edge $e \to e'$ between morphisms $e$ and $e'$, the morphism $e$ is marked if and only if the morphism $e'$ is marked.
\end{definition}

\begin{proposition}
  \label{prop:cartesian_marking_respects_path_components}
  Let $f\colon X \to Y$ be a Reedy fibration between marked bisimplicial sets such that the marking on $X$ respects path components, and let $u\colon A \to A'$ be a morphism of marked simplicial sets whose underlying morphism of unmarked simplicial sets is a monomorphism. Then the map $\langle u \backslash f \rangle$ is a Kan fibration.
\end{proposition}
\begin{proof}
  We need to show that for each $n \geq 0$ and $0 \leq k \leq n$ we can solve the lifting problem
  \begin{equation*}
    \begin{tikzcd}
      \Lambda^{n}_{k}
      \arrow[r]
      \arrow[d]
      & A' \backslash X
      \arrow[d]
      \\
      \Delta^{n}
      \arrow[r]
      \arrow[ur, dashed]
      & A \backslash X \times_{A' \backslash Y} A' \backslash Y
    \end{tikzcd}.
  \end{equation*}
  First assume that $n \geq 2$. We can augment the above square as follows.
  \begin{equation*}
    \begin{tikzcd}
      \Lambda^{n}_{k}
      \arrow[r]
      \arrow[d]
      & A' \backslash X
      \arrow[r]
      \arrow[d]
      & A^{\flat} \backslash X
      \arrow[d]
      \\
      \Delta^{n}
      \arrow[r]
      & A \backslash X \times_{A' \backslash Y} A' \backslash Y
      \arrow[r]
      & A^{\flat} \backslash X \times_{(A')^{\flat} \backslash Y} (A')^{\flat} \backslash X
    \end{tikzcd}.
  \end{equation*}
  Since the map on the right is a Kan fibration, we can solve the outer lifting problem. All the vertices of $\Delta^{n}$ belong to $\Lambda^{n}_{k}$, so a lift of the outside square factors through $A' \backslash X$.

  Now take $n = 1$, $k = 0$, so our horn inclusion is $\Delta^{\{0\}} \hookrightarrow \Delta^{1}$. By \hyperref[prop:equivalent_lifting_problems]{Proposition~\ref*{prop:equivalent_lifting_problems}}, the lifting problem we need to solve is equivalent to
  \begin{equation*}
    \begin{tikzcd}
      A
      \arrow[r]
      \arrow[d]
      & X / \Delta^{1}
      \arrow[d]
      \\
      A'
      \arrow[r]
      \arrow[ur, dashed]
      & X / \Delta^{0} \times_{Y / \Delta^{0}} Y / \Delta^{1}
    \end{tikzcd}.
  \end{equation*}
  Because $f$ is a Reedy fibration, the underlying diagram
  \begin{equation*}
    \begin{tikzcd}
      \mathring{A}
      \arrow[r]
      \arrow[d]
      & \mathring{X} / \Delta^{1}
      \arrow[d]
      \\
      \mathring{A'}
      \arrow[r]
      \arrow[ur, dashed]
      & \mathring{X} / \Delta^{0} \times_{\mathring{Y} / \Delta^{0}} \mathring{Y} / \Delta^{1}
    \end{tikzcd}.
  \end{equation*}
  of unmarked simplicial sets always admits a lift. It therefore suffices to check that any such lift respects the marking on $X$. To see this, consider the following triangle formed by some dashed lift.
  \begin{equation*}
    \begin{tikzcd}[row sep=small, column sep=large]
      & \mathring{X} / \Delta^{1}
      \arrow[dd]
      \\
      \mathring{A'}
      \arrow[ur, dashed]
      \arrow[dr]
      \\
      & \mathring{X} / \Delta^{0}
    \end{tikzcd}
  \end{equation*}
  Let $a \in A'_{1}$ be a marked 1-simplex, and consider the diagram
  \begin{equation*}
    \begin{tikzcd}[row sep=small, column sep=large]
      \Delta^{1} \square \Delta^{0}
      \arrow[r, "{(a, \id)}"]
      \arrow[dd]
      & \mathring{A}' \square \Delta^{0}
      \arrow[dd]
      \arrow[dr, "\gamma"]
      \\
      && \mathring{X}
      \\
      \Delta^{1} \square \Delta^{1}
      \arrow[r, "{(a, \id)}"]
      & \mathring{A}' \square \Delta^{1}
      \arrow[ur, dashed, swap, "\ell"]
    \end{tikzcd},
  \end{equation*}
  where the triangle on the right is the adjunct to the triangle above. In order to check that the dashed lift respects the marking on $X$, we have to show that for each $(a, b) \in (A' \square \Delta^{1})_{10} = A'_{1} \times \{0, 1\}$ with $a$ marked, the morphism $\ell(a, b)$ is marked in $X$. Because the map $\gamma$ comes from a map of marked simplicial sets, the commutativity of the triangle guarantees this for $b = 0$. The map $\Delta^{1} \square \Delta^{1} \to X$ gives us a 1-simplex in $X_{1}$ connecting $\ell(a, 0)$ and $\ell(a, 1)$, which implies by that $\ell(a, 1)$ is also marked because each marking respects path components.

  The case $n = 1$, $k = 1$ is identical.
\end{proof}

\subsection{Simplicial technology}
\label{ssc:simplicial_technology}

In the next section, we will need to work in several different cases with simplicial subsets $A \subseteq \Delta^{n}$ with certain conditions placed on the edge is $\Delta^{\{0, 1\}}$. In this section we prove some technical results in this direction. The results in this section are mainly lemmas whose job is to lighten the notational load in later proofs.

For the remainder of this section, fix $n \geq 2$.

\begin{notation}
  Let $X$ be an unmarked bisimplicial set, and let $e \in X_{10}$. For any simplicial subset $A \subseteq \Delta^{n}$ such that $\Delta^{\{0, 1\}} \subseteq A$, we will use the notation
  \begin{equation*}
    (A \backslash X)^{e} = A \backslash X \times_{\Delta^{\{0, 1\}} \backslash X} \{e\}.
  \end{equation*}
\end{notation}

The $m$-simplices of the simplicial set $(A \backslash X)^{e}$ are maps $A \square \Delta^{m} \to X$ such that the pullback
\begin{equation*}
  \begin{tikzcd}
    \Delta^{\{0, 1\}} \square \Delta^{m}
    \arrow[r]
    & A \square \Delta^{m}
    \arrow[r]
    & X
  \end{tikzcd}
\end{equation*}
factors through the map $\Delta^{\{0, 1\}} \square \Delta^{0} \to X$ corresponding to the element $e \in X_{10}$ under the Yoneda embedding.

It is easy to see the following.
\begin{lemma}
  \label{lemma:unmarked_pullback}
  The square
  \begin{equation*}
    \begin{tikzcd}
      (\Delta^{n} \backslash X)^{e}
      \arrow[r]
      \arrow[d]
      & \Delta^{n} \backslash X
      \arrow[d]
      \\
      (\Delta^{n} \backslash Y)^{f(e)} \times_{(A \backslash Y)^{f(e)}} (A \backslash X)^{e}
      \arrow[r]
      & (\Delta^{n}) \backslash Y \times_{A\backslash Y} A \backslash X
    \end{tikzcd}
  \end{equation*}
  is a (strict) pullback.
\end{lemma}

\begin{definition}
  For any simplicial subset $A \subseteq \Delta^{n}$ containing $\Delta^{\{0, 1\}}$, denote the marking on $A$ where the only marked nondegenerate edge is $\Delta^{\{0, 1\}}$ by $\mathcal{L}$, and the corresponding marked simplicial set by $A^{\mathcal{L}}$.
\end{definition}

\begin{notation}
  Let $X$ be a marked bisimplicial set and $A \subseteq \Delta^{n}$ such that $\Delta^{\{0, 1\}} \subseteq A$. Let $e \in X_{10}$ be a marked edge. Define
  \begin{equation*}
    (A^{\mathcal{L}} \backslash X)^{e} = A^{\mathcal{L}} \backslash X \times_{(\Delta^{\{0, 1\}})^{\sharp} \backslash X} \{e\}.
  \end{equation*}
\end{notation}

Let us compare this to the unmarked construction above. Since every map of marked simplicial sets is in particular a map of the underlying unmarked simplicial sets, the $m$-simplices of the simplicial set $(A^{\mathcal{L}} \backslash X)^{e}$ can be thought of as maps of unmarked simplicial sets $\alpha\colon A \square \Delta^{m} \to \mathring{X}$ with the following properties.
\begin{itemize}
  \item The pullback $\Delta^{\{0, 1\}} \square \Delta^{m} \to \mathring{X}$ descends to a map of marked simplicial sets
    \begin{equation*}
      (\Delta^{1})^{\sharp} \square \Delta^{m} \to X.
    \end{equation*}
    This guarantees us that $\alpha$ is a map of marked simplicial sets.


  \item There exists a factorization
    \begin{equation*}
      \begin{tikzcd}
        \Delta^{\{0, 1\}} \square \Delta^{m}
        \arrow[r]
        \arrow[dr]
        & A \square \Delta^{m}
        \arrow[r]
        & X
        \\
        & \Delta^{\{0, 1\}} \square \Delta^{0}
        \arrow[ur, swap, "\{e\}"]
      \end{tikzcd}
    \end{equation*}
\end{itemize}
The first of these conditions simply tells us that the edge $e$ is marked, and the second condition is the same as the unmarked case. We have shown the following.

\begin{lemma}
  \label{lemma:marked_vs_unmarked_with_first_morph_fixed}
  Let $A \subseteq \Delta^{n}$ be a simplicial subset containing $\Delta^{\{0, 1\}}$, and let $X$ be a marked bisimplicial set. Let $e \in X_{10}$ be a marked edge. There is an isomorphism
  \begin{equation*}
    (A^{\mathcal{L}} \backslash X)^{e} \cong (A \backslash \mathring{X})^{e}.
  \end{equation*}
\end{lemma}

Comparing simplices, the following result is also easy to see.

\begin{lemma}
  \label{lemma:marked_pullback}
  Let $f\colon X \to Y$ be a map of marked bisimplicial sets, and let $A \subseteq \Delta^{n}$ be a simplicial subset with $\Delta^{\{0, 1\}} \subseteq A$, $n \geq 2$. Then for any marked edge $e \in X_{10}$, the square
  \begin{equation*}
    \begin{tikzcd}
      ((\Delta^{n})^{\mathcal{L}} \backslash X)^{e}
      \arrow[r]
      \arrow[d]
      & (\Delta^{n})^{\mathcal{L}} \backslash X
      \arrow[d]
      \\
      ((\Delta^{n})^{\mathcal{L}} \backslash Y)^{f(e)} \times_{(A^{\mathcal{L}}\backslash Y)^{f(e)}} (A^{\mathcal{L}} \backslash X)^{e}
      \arrow[r]
      & (\Delta^{n})^{\mathcal{L}} \backslash Y \times_{A^{\mathcal{L}}\backslash Y} A^{\mathcal{L}} \backslash X
    \end{tikzcd}
  \end{equation*}
  is a (strict) pullback.
\end{lemma}

\begin{proposition}
  \label{lemma:check_marked_trivial_fibration_pointwise}
  Let $f\colon X \to Y$ be a Reedy fibration between marked bisimplicial sets, and let $i\colon A \subseteq \Delta^{n}$ be a simplicial subset containing $\Delta^{\{0, 1\}}$. The following are equivalent:
  \begin{enumerate}
    \item The map 
      \begin{equation*}
        \langle i^{\mathcal{L}} \backslash f \rangle\colon (\Delta^{n})^{\mathcal{L}} \backslash X \to (\Delta^{n})^{\mathcal{L}} \backslash Y \times_{A^{\mathcal{L}} \backslash Y} A^{\mathcal{L}} \backslash X
      \end{equation*}
      is a trivial fibration.

    \item For each marked $e \in X_{10}$, the map
      \begin{equation*}
        p_{e}\colon (\Delta^{n} \backslash \mathring{X})^{e} \to (\Delta^{n} \backslash \mathring{Y})^{f(e)} \times_{(A \backslash \mathring{Y})^{f(e)}} (A \backslash \mathring{X})^{e}
      \end{equation*}
      is a trivial fibration.
  \end{enumerate}
\end{proposition}
\begin{proof}
  Suppose the first holds. Then \hyperref[lemma:marked_pullback]{Lemma~\ref*{lemma:marked_pullback}} and \hyperref[lemma:marked_vs_unmarked_with_first_morph_fixed]{Lemma~\ref*{lemma:marked_vs_unmarked_with_first_morph_fixed}} together imply the second.

  Next, suppose that the second holds. By \hyperref[prop:cartesian_marking_respects_path_components]{Proposition~\ref*{prop:cartesian_marking_respects_path_components}}, the map $\langle i^{\mathcal{L}} \backslash f \rangle$ is a Kan fibration, so it is a trivial Kan fibration if and only if its fibers are contractible. Consider any map
  \begin{equation*}
    \gamma\colon \Delta^{0} \to (\Delta^{n})^{\mathcal{L}} \backslash Y \times_{A^{\mathcal{L}} \backslash Y} A^{\mathcal{L}} \backslash X.
  \end{equation*}
  This gives us in particular a map $\Delta^{0} \to A^{\mathcal{L}} \backslash X$, which is adjunct to a map $A^{\mathcal{L}} \square \Delta^{0} \to X$. The pullback
  \begin{equation*}
    \begin{tikzcd}
      (\Delta^{\{0, 1\}})^{\sharp} \square \Delta^{0}
      \arrow[r]
      & A^{\mathcal{L}} \square \Delta^{0}
      \arrow[r]
      & X
    \end{tikzcd}
  \end{equation*}
  gives us a marked morphism $e \in X_{10}$. The bottom composition in the below diagram is thus a factorization of $\gamma$, in which the left-hand square is a pullback.
  \begin{equation*}
    \begin{tikzcd}
      F
      \arrow[r]
      \arrow[d]
      & (\Delta^{n} \backslash \mathring{X})^{e}
      \arrow[r]
      \arrow[d, "p_{e}"]
      & (\Delta^{n})^{\mathcal{L}} \backslash X
      \arrow[d]
      \\
      \Delta^{0}
      \arrow[r]
      & (\Delta^{n} \backslash \mathring{Y})^{f(e)} \times_{(A \backslash \mathring{Y})^{f(e)}} (A \backslash \mathring{X})^{e}
      \arrow[r]
      & (\Delta^{n})^{\mathcal{L}} \backslash Y \times_{A^{\mathcal{L}} \backslash Y} A^{\mathcal{L}} \backslash X
    \end{tikzcd}
  \end{equation*}
  The right-hand square is a pullback by \hyperref[lemma:marked_pullback]{Lemma~\ref*{lemma:marked_pullback}} and \hyperref[lemma:marked_vs_unmarked_with_first_morph_fixed]{Lemma~\ref*{lemma:marked_vs_unmarked_with_first_morph_fixed}}. Since by assumption $p_{e}$ is a trivial fibration, $F$ is contractible. But by the pasting lemma, $F$ is the fiber of $\langle i^{\mathcal{L}} \backslash f \rangle$ over $\gamma$. Thus, the fibers of $\langle i^{\mathcal{L}} \backslash f \rangle$ are contractible, so $\langle i^{\mathcal{L}} \backslash f \rangle$ is a trivial Kan fibration.
\end{proof}


\subsection{Cocartesian morphisms}
\label{ssc:cocartesian_morphisms}

\begin{definition}
  Let $f\colon X \to Y$ be a Reedy fibration between complete Segal spaces. A morphism $e \in X_{10}$ is \defn{$f$-cocartesian} if the square
  \begin{equation*}
    \begin{tikzcd}
      (\Delta^{2} \backslash X)^{e}
      \arrow[r]
      \arrow[d]
      & (\Lambda^{2}_{0} \backslash X)^{e}
      \arrow[d]
      \\
      (\Delta^{2} \backslash Y)^{f(e)}
      \arrow[r]
      & (\Lambda^{2}_{0} \backslash Y)^{f(e)}
    \end{tikzcd}
  \end{equation*}
  is homotopy pullback.
\end{definition}

\begin{example}
  Identity morphisms are clearly $f$-cocartesian.
\end{example}

\begin{definition}
  \label{def:cocartesian_fibration_between_complete_segal_spaces}
  Let $f\colon X \to Y$ be a Reedy fibration between complete Segal spaces. We will say that $f$ is a \defn{cocartesian fibration} if each morphism in $Y$ has an $f$-cocartesian lift in $X$. More explicitly, $f$ is a cocartesian fibration if it is a Reedy fibration with the following property: for each edge $e\colon y \to y'$ in $Y$ and each vertex $x \in X$ such that $f(x) = y$, there exists an $f$-cocartesian morphism $\tilde{e}\colon x \to x'$ such that $f(\tilde{e}) = e$.
\end{definition}

\begin{definition}
  \label{def:cocoartesian_marking_on_complete_segal_spaces}
  Let $f\colon X \to Y$ be a cocartesian fibration between complete Segal spaces. We define a marking on $X$ such that a morphism is marked if and only if it is $f$-cocartesian. We will denote the corresponding marked bisimplicial by set $X^{\natural}$. We can view the map $f$ as a map of marked bisimplicial sets $f^{\natural}\colon X^{\natural} \to Y^{\sharp}$.
\end{definition}



\begin{definition}
  Define the following simplicial subsets of $\Delta^{n}$.
  \begin{itemize}
    \item For $n \geq 1$, denote by $I_{n}$ the \defn{spine} of $\Delta^{n}$, i.e.\ the simplicial subset
      \begin{equation*}
        \Delta^{\{0, 1\}} \amalg_{\Delta^{\{1\}}} \Delta^{\{1, 2\}} \amalg_{\Delta^{\{2\}}} \cdots \amalg_{\Delta^{\{n-1\}}} \Delta^{\{n-1, n\}} \subseteq \Delta^{n}.
      \end{equation*}

    \item For $n \geq 2$, denote by $L_{n}$ the simplicial subset
      \begin{equation*}
        L_{n} = \Delta^{\{0, 1\}} \amalg_{\Delta^{\{0\}}} \overbrace{\Delta^{\{0, 2\}} \amalg_{\Delta^{\{2\}}} \Delta^{\{2, 3\}} \amalg_{\Delta^{\{3\}}}\cdots \amalg_{\Delta^{\{n-1\}}} \Delta^{\{n-1, n\}}}^{I_{\{0, \hat{1}, 2, \ldots, n\}}} \subseteq \Delta^{n}.
      \end{equation*}
      That is, $L_{n}$ is the union of $\Delta^{\{0, 1\}}$ with the spine of $d_{1}\Delta^{n}$. We will call $L_{n}$ the \defn{left spine} of $\Delta^{n}$.
  \end{itemize}
\end{definition}

Note that $L_{2} \cong \Lambda^{2}_{0}$.

%\begin{lemma}
%  For any $n \geq 2$, the map
%  \begin{equation*}
%    \Delta^{\{0, \ldots, n-1\}} \amalg_{\Delta^{\{n-1\}}} \Delta^{\{n-1, n\}} \hookrightarrow \Delta^{n}
%  \end{equation*}
%  is inner anodyne.
%\end{lemma}
%\begin{proof}
%  This map can be written as the starred smash product of $\emptyset \hookrightarrow \Delta^{n-2}$, which is an inclusion, and $\Delta^{\{0\}} \hookrightarrow \Delta^{1}$, which is left anodyne. The result follows from \cite[Lemma 2.1.2.3]{highertopostheory}.
%\end{proof}

\begin{proposition}
  \label{prop:only_lowest_lifting_condition_is_necessary}
  Let $f\colon X \to Y$ be a Reedy fibration between Segal spaces, and let $e \in X_{10}$ be an $f$-cocartesian morphism. Then the square
  \begin{equation*}
    \begin{tikzcd}
      (\Delta^{n} \backslash X)^{e}
      \arrow[r]
      \arrow[d]
      & (L_{n} \backslash X)^{e}
      \arrow[d]
      \\
      (\Delta^{n} \backslash Y)^{f(e)}
      \arrow[r]
      & (L_{n} \backslash Y)^{f(e)}
    \end{tikzcd}
  \end{equation*}
  is homotopy pullback for all $n \geq 2$.
\end{proposition}
\begin{proof}
  We have the case $n = 2$ because $e$ is $f$-cocartesian. Assume the result is true up to $n - 1$. Then the square
  \begin{equation*}
    \begin{tikzcd}
      (\Delta^{n-1} \backslash X)^{e} \times_{\Delta^{\{n-1\}} \backslash X} \Delta^{\{n-1, n\}} \backslash X
      \arrow[r]
      \arrow[d]
      & (L_{n-1} \backslash X)^{e} \times_{\Delta^{\{n-1\}} \backslash X} \Delta^{\{n-1, n\}} \backslash X
      \arrow[d]
      \\
      (\Delta^{n-1} \backslash Y)^{f(e)} \times_{\Delta^{\{n-1\}} \backslash Y} \Delta^{\{n-1, n\}} \backslash Y
      \arrow[r]
      & (L_{n-1} \backslash Y)^{f(e)} \times_{\Delta^{\{n-1\}} \backslash Y} \Delta^{\{n-1, n\}} \backslash Y
    \end{tikzcd}
  \end{equation*}
  is homotopy pullback since each component is homotopy pullback. But this square is isomorphic to
  \begin{equation*}
    \begin{tikzcd}
      (\Delta^{n} \backslash X)^{e}
      \arrow[r]
      \arrow[d]
      & (L_{n} \backslash X)^{e}
      \arrow[d]
      \\
      (\Delta^{n} \backslash Y)^{f(e)}
      \arrow[r]
      & (L_{n} \backslash Y)^{f(e)}
    \end{tikzcd}:
  \end{equation*}
  The left-hand isomorphisms come from the Segal condition, and the right-hand isomorphisms come from the definition of $L_{n}$.
\end{proof}

\begin{corollary}
  \label{cor:marked_left_spine_gives_triv_fib}
  Let $f\colon X \to Y$ be a cocartesian fibration between complete Segal spaces. Then for all $n \geq 2$, the map
  \begin{equation*}
    (\Delta^{n})^{\mathcal{L}} \backslash X\nat \to (L_{n}^{\mathcal{L}} \backslash X\nat) \times_{(\Delta^{n})^{\mathcal{L}} \backslash Y\shp} L_{n}^{\mathcal{L}} \backslash Y\shp
  \end{equation*}
  is a trivial Kan fibration.
\end{corollary}
\begin{proof}
  For each cocartesian edge $e \in X_{10}$, the map
  \begin{equation*}
    (\Delta^{n} \backslash X)^{e} \to (L_{n} \backslash X)^{e} \times_{(\Delta^{n} \backslash Y)^{f(e)}} (L_{n} \backslash Y)^{f(e)}
  \end{equation*}
  is a weak equivalence by \hyperref[prop:only_lowest_lifting_condition_is_necessary]{Proposition~\ref*{prop:only_lowest_lifting_condition_is_necessary}}, and it is a Kan fibration by \hyperref[lemma:unmarked_pullback]{Lemma~\ref*{lemma:unmarked_pullback}}. The result follows from \hyperref[lemma:check_marked_trivial_fibration_pointwise]{Lemma~\ref*{lemma:check_marked_trivial_fibration_pointwise}}.
\end{proof}

For any simplicial set $A$, define a marked simplicial set $(\Delta^{1} \star A, \mathcal{L'})$ where the only nondegenerate simplex belonging to $\mathcal{L}'$ is $\Delta^{1}$. This is a slight generalization of the $\mathcal{L}$-marking.

\begin{lemma}
  \label{lemma:starred_smash_with_mono}
  Let $A \hookrightarrow B$ be a monomorphism of simplicial sets, and suppose that $B$ is $n$-skeletal (and therefore that $A$ is $n$-skeletal). Then the map
  \begin{equation*}
    \begin{tikzcd}
      (\Delta^{\{0\}} \star B)^{\flat} \coprod_{(\Delta^{\{0\}} \star A)^{\flat}} (\Delta^{1} \star A)^{\mathcal{L}'} \hookrightarrow (\Delta^{1} \star B)^{\mathcal{L}'}
    \end{tikzcd}
  \end{equation*}
  is in the saturated hull of the morphisms
  \begin{equation*}
    (\Lambda^{k}_{0})^{\mathcal{L}} \hookrightarrow (\Delta^{k})^{\mathcal{L}},\qquad 2 \leq k \leq n+2.
  \end{equation*}
\end{lemma}
\begin{proof}
  It suffices to show this for $A \hookrightarrow B = \partial \Delta^{m} \hookrightarrow \Delta^{m}$ for $0 \leq m \leq n$. In this case the necessary map is of the form
  \begin{equation*}
    (\Lambda^{m+2}_{0})^{\mathcal{L}} \hookrightarrow (\Delta^{m+2})^{\mathcal{L}}.
  \end{equation*}
\end{proof}

\begin{definition}
  \label{def:right_cancellation_property}
  We will say a collection of morphisms $\mathcal{A} \subset \mathrm{Mor}(\SSet^{+})$ has the \defn{right cancellation property} if for all $u$, $v \in \mathrm{Mor}(\SSet^{+})$,
  \begin{equation*}
    u \in \mathcal{A},\quad vu \in \mathcal{A} \quad \implies \quad v \in A.
  \end{equation*}
\end{definition}

\begin{lemma}
  \label{lemma:saturated_hull_of_left_spine_inclusions}
  Let $\mathcal{A}$ be a saturated set of morphisms of $\SSet^{+}$ all of whose underlying morphisms are monomorphisms, and which has the right cancellation property. Further suppose that $\mathcal{A}$ contains the following classes of morphisms.
  \begin{enumerate}
    \item Maps $(A)^{\flat} \hookrightarrow (B)^{\flat}$, where $A \to B$ is inner anodyne.

    \item Left spine inclusions $(L_{n})^{\mathcal{L}} \hookrightarrow (\Delta^{n})^{\mathcal{L}}$, $n \geq 2$.
  \end{enumerate}

  Then $\mathcal{A}$ contains left horn inclusions $(\Lambda^{n}_{0})^{\mathcal{L}} \hookrightarrow (\Delta^{n})^{\mathcal{L}}$, $n \geq 2$.
\end{lemma}
\begin{proof}
  For $n = 2$, there is nothing to check: we have an isomorphism $(L_{2})^{\mathcal{L}} \cong (\Lambda^{2}_{0})^{\mathcal{L}}$.

  We proceed by induction. Suppose we have shown that all horn inclusions $(\Lambda^{k}_{0})^{\mathcal{L}} \hookrightarrow (\Delta^{k})^{\mathcal{L}}$ belong to $\mathcal{A}$ for $2 \leq k < n$. From now on on we will suppress the marking $(-)^{\mathcal{L}}$. All simplicial subsets of $\Delta^{n}$ below will have $\Delta^{\{0, 1\}}$ marked if they contain it.

  Consider the factorization
  \begin{equation*}
    \begin{tikzcd}
      L_{n}
      \arrow[r, "u_{n}"]
      \arrow[rr, bend right, swap, "v_{n} \circ u_{n}"]
      & \Lambda^{n}_{0}
      \arrow[r, "v_{n}"]
      & \Delta^{n}
    \end{tikzcd}.
  \end{equation*}
  The morphism $v_{n} \circ u_{n}$ belongs to $\mathcal{A}$ by assumption, so in order to show that $v_{n}$ belongs to $\mathcal{A}$, it suffices by right cancellation to show that $u_{n}$ belongs to $\mathcal{A}$. Consider the factorization
  \begin{equation*}
    \begin{tikzcd}
      L_{n}
      \arrow[r, "w'_{n}"]
      \arrow[rr, bend right, swap, "u_{n}"]
      & L_{n} \cup d_{1} \Delta^{n}
      \arrow[r, "w_{n}"]
      & \Lambda^{n}_{0}
    \end{tikzcd}.
  \end{equation*}
  The map $w'_{n}$ is a pushout along the spine inclusion $I_{\{0, \hat{1}, 2, \ldots, n\}} \hookrightarrow d_{1}\Delta^{n}$, and hence is inner anodyne. Hence, we need only show that $w_{n}$ belongs to $\mathcal{A}$. Let
  \begin{equation*}
    Q = d_{2} \Delta^{n} \cup \cdots \cup d_{n} \Delta^{n},
  \end{equation*}
  and consider the following pushout diagram.
  \begin{equation*}
    \begin{tikzcd}
      (L_{n} \cup d_{1}\Delta^{n}) \cap Q
      \arrow[r, hook]
      \arrow[d, hook]
      & Q
      \arrow[d, hook]
      \\
      L_{n} \cup d_{1} \Delta^{n}
      \arrow[r, hook]
      & L_{n} \cup d_{1}\Delta^{n} \cup Q
    \end{tikzcd}.
  \end{equation*}
  Since $L_{n} \cup d_{1} \Delta^{n} \cup Q \cong \Lambda^{n}_{0}$, the bottom map is $w_{n}$, so it suffices to show that the top map belongs to $\mathcal{A}$. But this is isomorphic to
  \begin{equation*}
    \begin{tikzcd}
      (\Delta^{\{0, 1\}} \star \emptyset) \coprod_{(\Delta^{\{0\}} \star \emptyset)} (\Delta^{\{0\}} \star \partial \Delta^{\{2, 3, \ldots, n\}}) \hookrightarrow \Delta^{\{0, 1\}} \star \partial \Delta^{\{2, 3, \ldots, n\}}.
    \end{tikzcd}
  \end{equation*}
  The simplicial set $\partial \Delta^{\{2, \ldots, n\}}$ is $(n-3)$-skeletal, so this map belongs to $\mathcal{A}$ by \hyperref[lemma:starred_smash_with_mono]{Lemma~\ref*{lemma:starred_smash_with_mono}}.
\end{proof}

Let $f\colon X \to Y$ be a cocartesian fibration of Segal spaces, and denote the corresponding marked map by
\begin{equation*}
  f\nat\colon X\nat \to Y\shp.
\end{equation*}
Clearly, the following statements are equivalent.
\begin{itemize}
  \item The cocartesian marking on $X$ respect path components.

  \item A morphism $e \in X_{10}$ is $f$-cocartesian if and only if each morphism in its the path component in $X_{1}$ is $f$-cocartesian. In this case, we will say that the cocartesian morphisms respect path components.\footnote{It seems overwhelmingly likely that the property that cocartesian morphisms respect path components is a consequence of completeness. In the following results, one should keep in mind that the assumption that the cocartesian morphisms respect path components is probably redundant.}
\end{itemize}

For each $n \geq 2$, denote by $h^{n}$ the $\mathcal{L}$-marked inclusion
\begin{equation*}
  h^{n}\colon (\Lambda^{n}_{0})^{\mathcal{L}} \hookrightarrow (\Delta^{n})^{\mathcal{L}}.
\end{equation*}

\begin{proposition}
  \label{prop:segal_cocartesian_morphisms_are_quasicategory_cocartesian}
  Let $f\colon X \to Y$ be a cocartesian fibration of complete Segal spaces, and further assume that the cocartesian morphisms respect path components. Denote the map corresponding to $f$ on marked simplicial sets by
  \begin{equation*}
    f^{\natural}\colon X^{\natural} \to Y^{\sharp}.
  \end{equation*}
  Let $e \in X_{10}$ be an $f$-cocartesian morphism. Then for all $n \geq 2$, the map
  \begin{equation*}
    \langle h^{n} \backslash f^{\natural} \rangle\colon (\Delta^{n})^{\mathcal{L}} \backslash X^{\natural} \to (\Lambda^{n}_{0})^{\mathcal{L}} \backslash X^{\natural} \times_{(\Lambda^{n}_{0})^{\mathcal{L}} \backslash Y^{\sharp}} (\Delta^{n})^{\mathcal{L}} \backslash Y^{\sharp}
  \end{equation*}
  is a trivial fibration of simplicial sets.
\end{proposition}
\begin{proof}
  Consider the set
  \begin{equation*}
    S =
    \left\{
      \substack{
        u\colon A \to \text{ B morphism of} \\
        \text{marked simplicial sets} \\
        \text{such that $\mathring{u}$ is mono}
      }
      \ \bigg| \
      \langle u \backslash f\nat \rangle \text{ weak homotopy equivalence}
    \right\}.
  \end{equation*}
  It is clear that this set has the right cancellation property (\hyperref[def:right_cancellation_property]{Definition~\ref*{def:right_cancellation_property}}). By \hyperref[prop:cartesian_marking_respects_path_components]{Proposition~\ref*{prop:cartesian_marking_respects_path_components}}, a map $u$ belonging to $S$ is automatically a Kan fibration, hence is a trivial Kan fibration. Thus, we can equivalently say that $u \in S$ if and only if $u$ has the left-lifting property with respect to all maps of the form $\langle X / v \rangle$, where $v$ is a cofibration of simplicial sets. Thus, $S$ is saturated.

  The set $S$ contains all flat-marked inner anodyne morphisms because $f$ is a Reedy fibration. \hyperref[cor:marked_left_spine_gives_triv_fib]{Corollary~\ref*{cor:marked_left_spine_gives_triv_fib}} tells us that $S$ contains all left spine inclusions $(L_{n})^{\mathcal{L}} \hookrightarrow (\Delta^{n})^{\mathcal{L}}$, $n \geq 2$. Thus, by \hyperref[lemma:saturated_hull_of_left_spine_inclusions]{Lemma~\ref*{lemma:saturated_hull_of_left_spine_inclusions}}, $S$ contains all $\mathcal{L}$-marked left horn inclusions.
\end{proof}

\begin{corollary}
  \label{cor:pointwise_left_horn_condition}
  Let $f\colon X \to Y$ be a cocartesian fibration between complete segal spaces such that the cocartesian morphisms respect path components. Then for each cocartesian edge $e \in X_{10}$, the map
  \begin{equation*}
    (\Delta^{n} \backslash X)^{e} \to (\Lambda^{n}_{0} \backslash X)^{e} \times_{(\Lambda^{n}_{0} \ Y)^{f(e)}} (\Delta^{n} \backslash Y)^{f(e)}
  \end{equation*}
  is a trivial fibration.
\end{corollary}
\begin{proof}
  \hyperref[lemma:check_marked_trivial_fibration_pointwise]{Lemma~\ref*{lemma:check_marked_trivial_fibration_pointwise}}.
\end{proof}

Then $e$, viewed as a morphism in the quasicategory $X / \Delta^{0}$, is $f / \Delta^{0}$-cocartesian.

\begin{corollary}
  \label{cor:cocart_fib_between_css_gives_cocart_fib_of_quasicats}
  Let $f\colon X \to Y$ be a cocartesian fibration of complete Segal spaces such that the cocartesian edges respect path components. Then the map
  \begin{equation*}
    f/\Delta^{0}\colon X/\Delta^{0} \to Y/\Delta^{0}
  \end{equation*}
  is a cocartesian fibration of quasicategories.
\end{corollary}
\begin{proof}
  By \hyperref[thm:inner_fibration_between_quasicategories]{Theorem~\ref*{thm:inner_fibration_between_quasicategories}}, the map $f/\Delta^{0}$ is an inner fibration between quasicategories. By assumption, every morphism in $Y$ has a $f$-cocartesian lift. Therefore, we need only show that these lifts are also $f / \Delta^{0}$-cocartesian.

  Let $e X_{10}$ be such a lift. Then by \hyperref[cor:pointwise_left_horn_condition]{Corollary~\ref*{cor:pointwise_left_horn_condition}}, for all $n \geq 2$ the map
  \begin{equation*}
    (\Delta^{n} \backslash X)^{e} \to (\Lambda^{n}_{0} \backslash X)^{e} \times_{(\Lambda^{n}_{0} \backslash Y)^{f(e)}} (\Delta^{n} \backslash Y)^{f(e)}
  \end{equation*}
  is a trivial fibration. Hence, it certainly has the right-lifting property with respect to $\emptyset \hookrightarrow \Delta^{0}$. This is equivalent to the existence of a dashed lift in the diagram
  \begin{equation*}
    \begin{tikzcd}
      \Delta^{\{0, 1\}}
      \arrow[d, hook]
      \arrow[dr, "e"]
      \\
      \Lambda^{n}_{0}
      \arrow[r]
      \arrow[d, hook]
      & X / \Delta^{0}
      \arrow[d]
      \\
      \Delta^{n}
      \arrow[r]
      \arrow[ur, dashed]
      & Y / \Delta^{0}
    \end{tikzcd},
  \end{equation*}
  which tells us that $e$ is $f / \Delta^{0}$-cocartesian.
\end{proof}

\section{Complete Segal spaces of spans}
\label{sec:complete_segal_spaces_of_spans}

\subsection{A review of \texorpdfstring{$\infty$}{infinity}-categories of spans}
\label{ssc:a_review_of_infinity_categories_of_spans}

We give here a lightning review of $\infty$-categories of spans. For a more detailed account, the reader is referred to \cite[Sec.\ 3]{spectralmackeyfunctors1}. Note that here the infinity-category of spans in $\category{C}$ is called the \emph{effective Burnside category} of $\category{C}$.

Recall that if $\category{C}$ is a quasicategory admitting pullbacks, the complete Segal space of spans in $\category{C}$ is defined level-wise by the formula
\begin{equation*}
  \SPAN(\category{C})_{n} = \Map^{\Cart}(\asd(\Delta^{n}), \category{C})^{\simeq}.
\end{equation*}
The quasicategory of spans in $\category{C}$, denoted $\Span(\category{C})$, is then the first row $\SPAN(\category{C}) / \Delta^{0}$. More explicitly, we have
\begin{equation*}
  \Span(\category{C})_{n} = \Hom_{\SSet}^{\Cart}(\asd(\Delta^{n}), \category{C}).
\end{equation*}

Both of these constructions are functorial in quasicategories $\category{C}$ which admit pullbacks and functors $\category{C} \to \category{D}$ which preserve pullbacks.

The main goal of this section is to prove the following theorem.

\begin{theorem}
  \label{thm:span_of_bicartesian_fibration_is_bicartesian_fibration}
  Let $\category{C}$ and $\category{D}$ be quasicategories admitting all pullbacks, and let $p\colon \category{C} \to \category{D}$ be a bicartesian fibration which preserves pullbacks. Further suppose that $p$ has the following property:

  \begin{quote}
    For any square
    \begin{equation*}
      \sigma =
      \begin{tikzcd}
        x
        \arrow[r, "f"]
        \arrow[d]
        & y
        \arrow[d]
        \\
        x'
        \arrow[r, "f'", "\bullet" marking]
        & y'
      \end{tikzcd}
    \end{equation*}
    in $\category{C}$ such that the morphism $f'$ is $p$-cocartesian and $p(\sigma)$ is pullback in $\category{D}$, the following are equivalent.
    \begin{itemize}
      \item The morphism $f$ is $p$-cocartesian.

      \item The square $\sigma$ is pullback.
    \end{itemize}
  \end{quote}

  Then the functor $\pi\colon \Span(\category{C}) \to \Span(\category{D})$ is a cocartesian fibration of quasicategories, and if a morphism has the form
  \begin{equation*}
    \begin{tikzcd}
      & y
      \arrow[dl, "\circ" marking]
      \arrow[dr, "\bullet" marking]
      \\
      x
      && x'
    \end{tikzcd},
  \end{equation*}
  then it is $p$-cocartesian.
\end{theorem}

\begin{note}
  Since the definition of $\Span(\category{C})$ is self-dual, the functor $\Span(\category{C}) \to \Span(\category{D})$ is also a cartesian fibration with cartesian morphisms of the form
  \begin{equation*}
    \begin{tikzcd}
      & y
      \arrow[dl, "\bullet" marking]
      \arrow[dr, "\circ" marking]
      \\
      x
      && x'
    \end{tikzcd}.
  \end{equation*}
\end{note}

We prove \hyperref[thm:span_of_bicartesian_fibration_is_bicartesian_fibration]{Theorem~\ref*{thm:span_of_bicartesian_fibration_is_bicartesian_fibration}} in several steps. Since we will be working with bicartesian fibrations, it will be helpful to adapt some of the tools of marked simplicial sets to our purposes.

\subsection{Doubly-marked simplicial sets}
\label{ssc:doubly-marked_simplicial_sets}

Our proof of \hyperref[thm:span_of_bicartesian_fibration_is_bicartesian_fibration]{Theorem~\ref*{thm:span_of_bicartesian_fibration_is_bicartesian_fibration}} will involve working with with bicartesian fibrations. For this reason, it will be helpful to have results about simplicial sets with two markings, one of which controls the cocartesian structure and one of which controls the cartesian structure. We will call such simplicial sets \emph{doubly-marked;} the traditional terminology for this is \emph{bimarked,} but we wish to avoid the potential confusion between the similar terms \emph{marked bisimplicial set} and \emph{bimarked simplicial set.} This section consists mainly of verifications that some key results about marked simplicial sets which can be found in \cite[Sec.\ 3.1]{highertopostheory} hold in the doubly-marked case. The only results we will make use of are \hyperref[proposition:doubly-marked_anodyne_homotopy_pullback]{Proposition~\ref*{proposition:doubly-marked_anodyne_homotopy_pullback}}, \hyperref[eg:bimarking_on_asd_delta1]{Example~\ref*{eg:bimarking_on_asd_delta1}}, and \hyperref[eg:bimarking_on_asd_delta2]{Example~\ref*{eg:bimarking_on_asd_delta2}}.

\begin{definition}
  A \defn{doubly-marked simplicial set} is a triple $(X, \mathcal{E}, \mathcal{E}')$, where $X$ is a simplicial set and $\mathcal{E}$ and $\mathcal{E}'$ are markings. We will often shorten this to $X^{(\mathcal{E}, \mathcal{E}')}$. A morphism of doubly-marked simplicial sets is a morphism of the underlying simplicial sets which preserves each class of markings separately. We will denote the category of doubly-marked simplicial sets by $\SSet^{++}$.
\end{definition}

\begin{example}
  For any simplicial set $X$ we will freely use the following notation.
  \begin{itemize}
    \item The doubly-marked simplicial set where $\mathcal{E}$ and $\mathcal{E}'$ contain only the degenerate edges by $X^{( \flat, \flat )}$,

    \item The doubly-marked simplicial set where $\mathcal{E}$ contains only the degenerate edges and $\mathcal{E}'$ contains every edge by $X^{( \flat, \sharp )}$,

    \item The doubly-marked simplicial set where $\mathcal{E}$ contains every edge and $\mathcal{E}'$ contains only the degenerate edges by $X^{( \sharp, \flat )}$, and

    \item The doubly-marked simplicial set where $\mathcal{E}$ and $\mathcal{E}'$ contain every edge by $X^{( \sharp, \sharp )}$.
  \end{itemize}
\end{example}

\begin{example}
  \label{eg:bicartesian_marking}
  Let $p\colon \category{C} \to \category{D}$ be a bicartesian fibration between quasicategories. Denote by $\category{C}^{\natural}$ the doubly-marked simplicial set where
  \begin{itemize}
    \item The set $\mathcal{E}$ is the set of all $p$-cocartesian morphisms, and

    \item The set $\mathcal{E}'$ is the set of all $p$-cartesian morphisms.
  \end{itemize}

  In this way every bicartesian fibration gives a morphism of doubly-marked simplicial sets.
\end{example}

%The category $\SSet^{++}$ is closely connected to the category $\SSet^{+}$ and the category $\SSet$. We have the following obvious results.
%\begin{itemize}
%  \item There is a forgetful functor $u\colon \SSet^{++} \to \SSet$ which forgets both markings. This has left adjoint $\iota\colon X \mapsto (X, \flat, \flat)$. The functor $\iota$ is a full subcategory inclusion.
%
%  \item There is a forgetful functor $u_{1}\colon \SSet^{++} \to \SSet^{+}$, which forgets the second marking, sending $(X, \mathcal{E}, \mathcal{E}') \mapsto (X, \mathcal{E})$. This has a left adjoint $\iota_{1}$ given by the functor which sends $(X, \mathcal{E}) \mapsto (X, \mathcal{E}, \flat)$. The functor $\iota_{1}$ is a full subcategory inclusion; there is a bijection between maps between marked simplicial sets $(X, \mathcal{E}) \to (Y, \mathcal{E}')$ and maps $(X, \mathcal{E}, \flat) \to (Y, \mathcal{E}', \flat)$. The same is true of the functor $u_{2}$ which forgets the first marking and its left adjoint $\iota_{2}$.
%\end{itemize}

Just as in the marked case, we will a set of doubly-marked anodyne morphisms, which will turn out to be the morphisms with the left lifting property with respect to bicartesian fibrations. Intuitively, the set of doubly-marked anodyne morphisms is generated by the union of the generators of

\begin{definition}
  The class of \defn{doubly-marked anodyne morphisms} is the saturated hull of the union of the following classes of morphisms.
  \begin{enumerate}
    \item[(1)] For each $0  < i < n$, the inner horn inclusions
      \begin{equation*}
        (\Lambda^{n}_{i})^{(\flat, \flat)} \to (\Delta^{n})^{(\flat, \flat)}.
      \end{equation*}

    \item[(2)] For every $n > 0$, the inclusion
      \begin{equation*}
        (\Lambda^{n}_{0})^{(\mathcal{L}, \flat)} \hookrightarrow (\Delta^{n})^{(\mathcal{L}, \flat)},
      \end{equation*}
      where $\mathcal{L}$ denotes the set of all degenerate edges of $\Delta^{n}$ together with the edge $\Delta^{\{0, 1\}}$.

    \item[(2')] For every $n > 0$, the inclusion
      \begin{equation*}
        (\Lambda^{n}_{n})^{(\flat, \mathcal{R})} \hookrightarrow (\Delta^{n})^{(\flat, \mathcal{R})},
      \end{equation*}
      where $\mathcal{R}$ denotes the set of all degenerate edges of $\Delta^{n}$ together with the edge $\Delta^{\{n-1, n\}}$.

    \item[(3)] The inclusion
      \begin{equation*}
        (\Lambda^{2}_{1})^{(\sharp, \flat)} \coprod_{(\Lambda^{2}_{1})^{(\flat, \flat)}} (\Delta^{2})^{(\flat, \flat)} \to (\Delta^{2})^{(\sharp, \flat)}.
      \end{equation*}

    \item[(3')] The inclusion
      \begin{equation*}
        (\Lambda^{2}_{1})^{(\flat, \sharp)} \coprod_{(\Lambda^{2}_{1})^{(\flat, \flat)}} (\Delta^{2})^{(\flat, \flat)} \to (\Delta^{2})^{(\flat, \sharp)}.
      \end{equation*}

    \item[(4)] For every Kan complex $K$, the map
      \begin{equation*}
        K^{(\flat, \flat)} \to K^{(\sharp, \flat)}.
      \end{equation*}

    \item[(4')] For every Kan complex $K$, the map
      \begin{equation*}
        K^{(\flat, \flat)} \to K^{(\flat, \sharp)}.
      \end{equation*}
  \end{enumerate}
\end{definition}

\begin{example}
  \label{eg:bimarking_on_asd_delta1}
  Define a doubly-marked structure $(\asd(\Delta^{1}), \mathcal{E}, \mathcal{E}') = \asd(\Delta^{1})^{\heartsuit}$ on $\asd(\Delta^{1})$, where the morphism $01 \to 11$ is $\mathcal{E}$-marked, and the morphism $01 \to 00$ is $\mathcal{E}'$-marked. Denoting $\mathcal{E}$-marked morphisms with a $\bullet$ and $\mathcal{E}'$-marked morphisms with a $\circ$, we can draw this as follows.
  \begin{equation*}
    \begin{tikzcd}
      && 11
      \\
      & 01
      \arrow[ur, "\bullet" marking]
      \arrow[dl, "\circ" marking]
      \\
      00
    \end{tikzcd}
  \end{equation*}

  The inclusion $\{00\} = \asd(\Delta^{\{0\}}) \hookrightarrow \asd(\Delta^{1})^{\heartsuit}$ is doubly-marked anodyne: we can factor it
  \begin{equation*}
    \{00\} \hookrightarrow (\Delta^{1})^{(\flat, \sharp)} \hookrightarrow \asd(\Delta^{1})^{\heartsuit},
  \end{equation*}
  where the first inclusion is of the form (2') and the second is a pushout of a morphism of the form (2). We can draw this process as follows.
  \begin{equation*}
    \begin{tikzcd}
      \
      \\
      \
      \\
      00
    \end{tikzcd}
    \qquad\hookrightarrow\qquad
    \begin{tikzcd}
      & \
      \\
      & 01
      \arrow[dl, "\circ" marking]
      \\
      00
    \end{tikzcd}
    \qquad\hookrightarrow\qquad
    \begin{tikzcd}
      && 11
      \\
      & 01
      \arrow[ur, "\bullet" marking]
      \arrow[dl, "\circ" marking]
      \\
      00
    \end{tikzcd}
  \end{equation*}
\end{example}

\begin{example}
  \label{eg:bimarking_on_asd_delta2}
  Define a doubly-marked structure $\asd(\Delta^{2})^{\heartsuit}$ on $\asd(\Delta^{2})$, following the notation of \hyperref[eg:bimarking_on_asd_delta1]{Example~\ref*{eg:bimarking_on_asd_delta1}}, as follows.
  \begin{equation*}
    \begin{tikzcd}
      && 11
      \\
      & 01
      \arrow[ur, "\bullet" marking]
      \arrow[dl, "\circ" marking]
      && 12
      \arrow[ul]
      \arrow[dr]
      \\
      00
      && 02
      \arrow[ll]
      \arrow[rr]
      \arrow[uu]
      \arrow[ur, "\bullet" marking]
      \arrow[ul]
      && 22
    \end{tikzcd}
  \end{equation*}
  Note that the bimarking of \hyperref[eg:bimarking_on_asd_delta1]{Example~\ref*{eg:bimarking_on_asd_delta1}} is the restriction of $\asd(\Delta^{2})^{\heartsuit}$ to $\asd(\Delta^{\{0, 1\}})$. Denote the restriction of the bimarking $\asd(\Delta^{2})^{\heartsuit}$ to $\asd(\Delta^{\{0, 2\}})$ by $\asd(\Delta^{\{0, 2\}})^{\heartsuit}$; this agrees with the $(\flat,\flat)$-marking.

  The inclusion $\asd(\Lambda^{2}_{0})^{\heartsuit} \hookrightarrow \asd(\Delta^{2})^{\heartsuit}$ is doubly-marked anodyne. To see this, note the following factorization.
\end{example}

\begin{proposition}
  \label{prop:rlp_doubly-marked_anodyne}
  A map $p\colon (X, \mathcal{E}_{X}, \mathcal{E}_{X}') \to (S, \mathcal{E}_{S}, \mathcal{E}_{S}')$ of doubly-marked simplicial sets has the right lifting property with respect to doubly-marked anodyne morphisms if and only if the following conditions are satisifed.
  \begin{enumerate}
    \item[(A)] The map $p$ is an inner fibration of simplicial sets.

    \item[(B)] An edge $e$ of $X$ is $\mathcal{E}_{X}$-marked if and only if $p(e)$ is $\mathcal{E}_{S}$-marked and $e$ is $p$-cocartesian.

    \item[(B')] An edge $e$ of $X$ is $\mathcal{E}'_{X}$-marked if and only if $p(e)$ is $\mathcal{E}'_{S}$-marked and $e$ is $p$-cartesian.

    \item[(C)] For every object $y$ of $X$ and every $\mathcal{E}_{S}$-marked edge $\bar{e}\colon \bar{x} \to p(y)$ in $S$, there exists a $\mathcal{E}_{X}$ marked edge $e\colon x \to y$ of $X$ with $p(e) = \bar{e}$.

    \item[(C')] For every object $y$ of $X$ and every $\mathcal{E}'_{S}$-marked edge $\bar{e}\colon \bar{x} \to p(y)$ in $S$, there exists a $\mathcal{E}'_{X}$ marked edge $e\colon x \to y$ of $X$ with $p(e) = \bar{e}$.
  \end{enumerate}
\end{proposition}
\begin{proof}
  By \cite[Prop.\ 3.1.1.6]{highertopostheory}, (A), (B) and (C) are equivalent to (1), (2), and (3). By its dual, (A), (B') and (C') are equivalent to (1), (2'), and (3')
\end{proof}

%We would like to define cofibrations of doubly-marked simplicial sets to be maps of doubly-marked simplicial sets whose underlying map of simplicial sets is a monomorphism, and then show that the class of doubly-marked anodyne maps is stable under smash products with arbitrary cofibrations. Unfortunately, this turns out not to be quite true; the candidate class of cofibrations described above is generated by the following classes of maps.
%\begin{itemize}
%  \item[(I)] Boundary fillings $(\partial \Delta^{n})^{(\flat, \flat)} \to (\Delta^{n})^{(\flat, \flat)}$.
%
%  \item[(II)] Markings $(\Delta^{1})^{(\flat, \flat)} \to (\Delta^{1})^{(\sharp, \flat)}$.
%
%  \item[(III)] Markings $(\Delta^{1})^{(\flat, \flat)} \to (\Delta^{1})^{(\flat, \sharp)}$.
%\end{itemize}
%There is nothing that tells us, for example, that the smash product of a doubly-marked anodyne map of type $(2)$ with a cofibration of type (III) should be doubly-marked anodyne. Denoting arrows with the first marking using a $\bullet$ and the second using a $\circ$, this amounts, in the case $n = 0$, to the statement that the map
%\begin{equation*}
%  \begin{tikzcd}
%    \cdot
%    \arrow[r]
%    \arrow[d, "\bullet" marking]
%    \arrow[dr]
%    & \cdot
%    \arrow[d, "\bullet" marking]
%    \\
%    \cdot
%    \arrow[r, "\circ" marking]
%    & \cdot
%  \end{tikzcd}
%  \quad \longrightarrow \quad
%  \begin{tikzcd}
%    \cdot
%    \arrow[r, "\circ" marking]
%    \arrow[d, "\bullet" marking]
%    \arrow[dr]
%    & \cdot
%    \arrow[d, "\bullet" marking]
%    \\
%    \cdot
%    \arrow[r, "\circ" marking]
%    & \cdot
%  \end{tikzcd}
%\end{equation*}
%should be doubly-marked anodyne, which it isn't. However, we have the following weaker statement.

\begin{lemma}
  \label{lemma:smash_product_of_doubly-marked_anodyne_and_monic_is_doubly-marked_anodyne}
  The class of doubly-marked anodyne maps in $\SSet^{++}$ is stable under smash products with flat monomorphisms, i.e.\ morphisms $A^{(\flat, \flat)} \to B^{(\flat, \flat)}$ such that the underlying morphism of simplicial sets $A \to B$ is a monomorphism. That is, if $f\colon X \to Y$ is doubly-marked anodyne and $A \to B$ is a monomorphism of simplicial sets, then
  \begin{equation*}
    (X \times B^{(\flat, \flat)}) \coprod_{X \times A^{(\flat, \flat)}} (Y \times A^{(\flat, \flat)}) \to Y \times B^{(\flat, \flat)}
  \end{equation*}
  is doubly-marked anodyne.
\end{lemma}
\begin{proof}
  It suffices to show that for any flat boundary inclusion $(\partial \Delta^{n})^{(\flat, \flat)} \to (\Delta^{n})^{(\flat, \flat)}$ and any generating doubly-marked anodyne morphism $X \to Y$, the map
  \begin{equation*}
    (X \times (\Delta^{n})^{(\flat, \flat)}) \coprod_{X \times (\partial \Delta^{n})^{(\flat, \flat)}} (Y \times (\partial\Delta^{n})^{(\flat, \flat)}) \to Y \times (\Delta^{n})^{(\flat, \flat)}
  \end{equation*}
  is doubly-marked anodyne. If $X \to Y$ belongs to one of the classes (1), (2'), (3'), or (4'), then this is true by the arguments of \cite[Prop.\ 3.1.2.3]{highertopostheory}. If $X \to Y$ belongs to one of the classes (1), (2), (3), or (4), then it is true by the dual arguments.
\end{proof}

\begin{definition}
  For any doubly-marked simplicial sets $X$, $Y$, define a simplicial set $\Map^{(\flat, \flat)}(X, Y)$ by the following universal property: for any simplicial set $Z$, there is a bijection
  \begin{equation*}
    \Hom_{\SSet}(Z, \Map^{(\flat, \flat)}(X, Y)) \cong \Hom_{\SSet^{++}}(Z^{(\flat, \flat)} \times X, Y).
  \end{equation*}
\end{definition}

\begin{proposition}
  \label{proposition:doubly-marked_anodyne_homotopy_pullback}
  Let $p\colon \category{C} \to \category{D}$ be a bicartesian fibration of quasicategories, and denote by $\category{C}^{\natural} \to \category{D}^{(\sharp, \sharp)}$ the associated map of doubly-marked simplicial sets as in \hyperref[eg:bicartesian_marking]{Example~\ref*{eg:bicartesian_marking}}. Let $X \to Y$ be any doubly-marked anodyne map of simplicial sets. Then the square
  \begin{equation*}
    \begin{tikzcd}
      \Fun^{(\flat, \flat)}(Y, \category{C}\nat)^{\simeq}
      \arrow[r]
      \arrow[d]
      & \Fun^{(\flat, \flat)}(X, \category{C}\nat)^{\simeq}
      \arrow[d]
      \\
      \Fun^{(\flat, \flat)}(Y, \category{D}^{(\sharp, \sharp)})^{\simeq}
      \arrow[r]
      & \Fun^{(\flat, \flat)}(X, \category{D}^{(\sharp, \sharp)})^{\simeq}
    \end{tikzcd}
  \end{equation*}
  is a homotopy pullback in the Kan model structure.
\end{proposition}
\begin{proof}
  First, we show that the right-hand map is a Kan fibration. In fact, the underlying map
  \begin{equation*}
    \Fun^{(\flat, \flat)}(X, \category{C}^{\natural}) \to \Fun^{(\flat, \flat)}(X, \category{D}^{(\sharp, \sharp)})
  \end{equation*}
  is a trivial Kan fibration, since by \hyperref[lemma:smash_product_of_doubly-marked_anodyne_and_monic_is_doubly-marked_anodyne]{Lemma~\ref*{lemma:smash_product_of_doubly-marked_anodyne_and_monic_is_doubly-marked_anodyne}} together with \hyperref[prop:rlp_doubly-marked_anodyne]{Proposition~\ref*{prop:rlp_doubly-marked_anodyne}} we can solve the necessary lifting problems. This, together with the fact that each of the objects is a Kan complex, implies that in order to show that the above square is homotopy pullback it suffices to check that the map
  \begin{equation*}
    \Fun^{(\flat, \flat)}(Y, \category{C}\nat)^{\simeq} \to \Fun^{(\flat, \flat)}(X, \category{C}\nat)^{\simeq} \times_{\Fun^{(\flat, \flat)}(Y, \category{D}^{(\sharp, \sharp)})^{\simeq}} \Fun^{(\flat, \flat)}(X, \category{D}^{(\sharp, \sharp)})^{\simeq}
  \end{equation*}
  is a trivial Kan fibration. Since the functor $(-)^{\simeq}$ is a right adjoint it preserves limits, so it again suffices to show that the underlying map
  \begin{equation*}
    \Fun^{(\flat, \flat)}(Y, \category{C}\nat) \to \Fun^{(\flat, \flat)}(X, \category{C}\nat) \times_{\Fun^{(\flat, \flat)}(Y, \category{D}^{(\sharp, \sharp)})} \Fun^{(\flat, \flat)}(X, \category{D}^{(\sharp, \sharp)})
  \end{equation*}
  is a trivial fibration, which follows from \hyperref[lemma:smash_product_of_doubly-marked_anodyne_and_monic_is_doubly-marked_anodyne]{Lemma~\ref*{lemma:smash_product_of_doubly-marked_anodyne_and_monic_is_doubly-marked_anodyne}}.
\end{proof}

\subsection{Cartesian morphisms}
\label{ssc:cartesian_morphisms}

In this section, we show that we really have identified the cocartesian morphisms correctly. We will first show that morphisms of the form
\begin{equation}
  \label{eq:form_of_p_cocartesian_morphisms}
  \begin{tikzcd}
    & y
    \arrow[dl, "\circ" marking]
    \arrow[dr, "\bullet" marking]
    \\
    x
    && x'
  \end{tikzcd}.
\end{equation}
are $p$-cocartesian.

\begin{proposition}
  \label{prop:form_of_cocartesian_morphisms_in_spans}
  Let $\pi\colon \category{C} \to \category{D}$ be a bicartesian fibration of quasicategories which preserves pullbacks and satisfies the condition of \hyperref[thm:span_of_bicartesian_fibration_is_bicartesian_fibration]{Theorem~\ref*{thm:span_of_bicartesian_fibration_is_bicartesian_fibration}}, and let
  \begin{equation*}
    p\colon \SPAN(\category{C}) \to \SPAN(\category{D})
  \end{equation*}
  be the corresponding map between complete Segal spaces of spans. If a morphism in $\SPAN(\category{C})$ is of the form
  \begin{equation*}
    \begin{tikzcd}
      & y
      \arrow[dl, "\circ" marking]
      \arrow[dr, "\bullet" marking]
      \\
      x
      && x'
    \end{tikzcd},
  \end{equation*}
  where the morphism marked with a $\circ$ is $\pi$-cartesian and the morphism marked with a $\bullet$ is $\pi$-cocartesian, then it is $p$-cocartesian.
\end{proposition}
\begin{proof}
  In order to show that a morphism $e\colon x \leftarrow y \rightarrow x'$ of the form given in \hyperref[prop:form_of_cocartesian_morphisms_in_spans]{Proposition~\ref*{prop:form_of_cocartesian_morphisms_in_spans}} are cocartesian, we have to show that
  %the square
  %\begin{equation*}
  %  \begin{tikzcd}
  %    \Span(\category{C})_{2} \times_{\Span(\category{C})_{\{0, 1\}}} \{e\}
  %    \arrow[r]
  %    \arrow[d]
  %    & \Span(\category{C})_{\{0, 2\}} \times_{\Span(\category{C})_{\{0\}}} \{x\}
  %    \arrow[d]
  %    \\
  %    \Span(\category{D})_{2} \times_{\Span(\category{D})_{\{0, 1\}}} \{\pi e\}
  %    \arrow[r]
  %    & \Span(\category{D})_{\{0, 2\}} \times_{\Span(\category{D})_{\{0\}}} \{\pi x\}
  %  \end{tikzcd}
  %\end{equation*}
  %is homotopy pullback. Expanding, we have to show that
  the square
  \begin{equation*}
    \begin{tikzcd}
      \Fun^{\Cart}(\asd(\Delta^{2}), \category{C})^{\simeq} \times_{\Fun(\asd(\Delta^{\{0, 1\}}), \category{C})^{\simeq}} \{e\}
      \arrow[r]
      \arrow[d]
      & \Fun(\asd(\Lambda^{2}_{0}), \category{C})^{\simeq} \times_{\Fun(\asd(\Delta^{\{0, 1\}}), \category{C})^{\simeq}} \{e\}
      \arrow[d]
      \\
      \Fun^{\Cart}(\asd(\Delta^{2}), \category{D})^{\simeq} \times_{\Fun(\asd(\Delta^{\{0, 1\}}), \category{D})^{\simeq}} \{\pi e\}
      \arrow[r]
      & \Fun(\asd(\Lambda^{2}_{0}), \category{D})^{\simeq} \times_{\Fun(\asd(\Delta^{\{0, 1\}}), \category{D})^{\simeq}} \{\pi e\}
    \end{tikzcd}
  \end{equation*}
  is homotopy pullback.

  Recall the doubly-marked structure $\asd(\Delta^{2})^{\heartsuit} = (\asd(\Delta^{2}), \mathcal{E}, \mathcal{E}')$ on $\asd(\Delta^{2})$ of \hyperref[eg:bimarking_on_asd_delta2]{Example~\ref*{eg:bimarking_on_asd_delta2}}, reproduced below, where the nondegenerate edges in $\mathcal{E}$ are distinguished with a $\bullet$, and the nondegenerate edges in $\mathcal{E}'$ are distinguished with a $\circ$.
  \begin{equation*}
    \begin{tikzcd}
      && 11
      \\
      & 01
      \arrow[ur, "\bullet" marking]
      \arrow[dl, "\circ" marking]
      && 12
      \arrow[ul]
      \arrow[dr]
      \\
      00
      && 02
      \arrow[ll]
      \arrow[rr]
      \arrow[uu]
      \arrow[ur, "\bullet" marking]
      \arrow[ul]
      && 22
    \end{tikzcd}
  \end{equation*}
  Denote the induced doubly-marked structure on the simplicial subset $\asd(\Lambda^{2}_{0})$ also with a heart.

  We now note that we can decompose the above square into two squares
  \begin{equation*}
    \begin{tikzcd}[column sep=tiny]
      \Fun^{\Cart}(\asd(\Delta^{2}), \category{C})^{\simeq} \times_{\Fun(\asd(\Delta^{\{0, 1\}}), \category{C})^{\simeq}} \{e\}
      \arrow[r]
      \arrow[d]
      & \Fun^{(\flat, \flat)}(\asd(\Delta^{2})^{\heartsuit}, \category{C}^{\natural})^{\simeq} \times_{\Fun^{(\flat, \flat)}(\asd(\Delta^{\{0, 1\}})^{\heartsuit}, \category{C}^{\natural})^{\simeq}} \{e\}
      \arrow[d]
      \\
      \Fun^{\Cart}(\asd(\Delta^{2}), \category{D})^{\simeq} \times_{\Fun(\asd(\Delta^{\{0, 1\}}), \category{D})^{\simeq}} \{\pi e\}
      \arrow[r]
      & \Fun^{(\flat, \flat)}(\asd(\Delta^{2})^{\heartsuit}, \category{D}^{(\sharp, \sharp)})^{\simeq} \times_{\Fun^{(\flat, \flat)}(\asd(\Delta^{\{0, 1\}})^{\heartsuit}, \category{D}^{(\sharp, \sharp)})^{\simeq}} \{\pi e\}
    \end{tikzcd}
  \end{equation*}
  and
  \begin{equation*}
    \begin{tikzcd}[column sep=tiny]
      \Fun^{(\flat, \flat)}(\asd(\Delta^{2})^{\heartsuit}, \category{C}^{\natural})^{\simeq} \times_{\Fun^{(\flat, \flat)}(\asd(\Delta^{\{0, 1\}})^{\heartsuit}, \category{C}^{\natural})^{\simeq}} \{e\}
      \arrow[r]
      \arrow[d]
      & \Fun(\asd(\Lambda^{2}_{0}), \category{C})^{\simeq} \times_{\Fun(\asd(\Delta^{\{0, 1\}}), \category{C})^{\simeq}} \{e\}
      \arrow[d]
      \\
      \Fun^{(\flat, \flat)}(\asd(\Delta^{2})^{\heartsuit}, \category{D}^{(\sharp, \sharp)})^{\simeq} \times_{\Fun^{(\flat, \flat)}(\asd(\Delta^{\{0, 1\}})^{\heartsuit}, \category{D}^{(\sharp, \sharp)})^{\simeq}} \{\pi e\}
      \arrow[r]
      & \Fun(\asd(\Lambda^{2}_{0}), \category{D})^{\simeq} \times_{\Fun(\asd(\Delta^{\{0, 1\}}), \category{D})^{\simeq}} \{\pi e\}
    \end{tikzcd}.
  \end{equation*}
  The first square is a homotopy pullback because the bottom morphism is a full inclusion of connected components, and the fiber over a connected component corresponding to Cartesian functors $\asd(\Delta^{2}) \to \category{D}$ is consists precisely of Cartesian functors $\asd(\Delta^{2}) \to \category{C}$ by the condition of \hyperref[thm:span_of_bicartesian_fibration_is_bicartesian_fibration]{Theorem~\ref*{thm:span_of_bicartesian_fibration_is_bicartesian_fibration}}. Therefore, we need to show that the second square is homotopy pullback. For this it suffices to show that the square
  \begin{equation*}
    \begin{tikzcd}
      \Fun^{(\flat, \flat)}(\asd(\Delta^{2})^{\heartsuit}, \category{C}^{\natural})^{\simeq}
      \arrow[r]
      \arrow[d]
      & \Fun(\asd(\Lambda^{2}_{0}), \category{C})^{\simeq}
      \arrow[d]
      \\
      \Fun^{(\flat, \flat)}(\asd(\Delta^{2})^{\heartsuit}, \category{D}^{(\sharp, \sharp)})^{\simeq}
      \arrow[r]
      & \Fun(\asd(\Lambda^{2}_{0}), \category{D})^{\simeq}
    \end{tikzcd}.
  \end{equation*}
  is homotopy pullback. But that this is of the form of the square in \hyperref[proposition:doubly-marked_anodyne_homotopy_pullback]{Proposition~\ref*{proposition:doubly-marked_anodyne_homotopy_pullback}}, with $X \to Y = \asd(\Lambda^{2}_{0})^{\heartsuit} \to \asd(\Delta^{2})^{\heartsuit}$, which we saw in \hyperref[eg:bimarking_on_asd_delta2]{Example~\ref*{eg:bimarking_on_asd_delta2}} was doubly-marked anodyne.
\end{proof}

\begin{theorem}
  Let $\category{C}$ and $\category{D}$ be quasicategories with pullbacks, and let $\pi\colon \category{C} \to \category{D}$ be a bicartesian fibration which sends pullbacks to pullbacks. Then the map
  \begin{equation*}
    p\colon \Span(\category{C}) \to \Span(\category{D})
  \end{equation*}
  is a cocartesian fibration (hence a bicartesian fibration) between quasicategories.
\end{theorem}
\begin{proof}
  In order to show that $p$ fulfill the requirements of \hyperref[cor:cocart_fib_between_css_gives_cocart_fib_of_quasicats]{Corollary~\ref*{cor:cocart_fib_between_css_gives_cocart_fib_of_quasicats}}, it suffices to show that for any 1-simplex $g \to g'$ in $\Span(\category{C})_{1}$ between morphisms
  \begin{equation*}
    g\colon x \leftarrow y \to z \qquad\text{and}\qquad g'\colon x' \leftarrow y' \to z',
  \end{equation*}
  the morphism $g$ is $p$-cocartesian if and only if the morphism $g'$ is $p$-cocartesian. Such a 1-simplex looks as follows.
  \begin{equation*}
    \begin{tikzcd}
      x
      \arrow[d, "\simeq"]
      & y
      \arrow[l, swap, "g_{0}"]
      \arrow[r, "g_{1}"]
      \arrow[d, "\simeq"]
      & z
      \arrow[d, "\simeq"]
      \\
      x'
      & y'
      \arrow[l, swap, "g'_{0}"]
      \arrow[r, "g'_{1}"]
      & z'
    \end{tikzcd}
  \end{equation*}
  Since equivalences are both cartesian and cocartesian, the morphism $g_{0}$ is $\pi$-cocartesian if and only if the morphism $g_{0}'$ is $\pi$-cocartesian, and that the morphism $g_{1}$ is $\pi$-cartesian if and only if the morphism $g_{1}'$ is $\pi$-cartesian. Thus, $g$ is cocartesian if and only if $g'$ is cocartesian.
\end{proof}

\appendix

\section{Appendix}

\subsection{Bisimplicial sets}
\label{sss:bisimplicial_sets}

The category $\SSet$ carries two model structures of which we will make frequent use:
\begin{itemize}
  \item The \emph{Kan} model structure, which has the following description.
    \begin{itemize}
      \item The fibrations are the Kan fibrations.

      \item The cofibrations are the monomorphisms.

      \item The weak equivalences are weak homotopy equivalences.
    \end{itemize}

  \item The \emph{Joyal} model structure. We will not give a complete description, referring the reader to \cite[Sec.\ 2.2.5]{highertopostheory}. We will make use of the following properties.
    \begin{itemize}
      \item The cofibrations are monomorphisms.

      \item The fibrant objects are quasicategories, and the fibrations between fibrant objects are isofibrations, i.e.\ inner fibrations with lifts of equivalences (cf \cite[Cor.\ 2.6.5]{highertopostheory}).
    \end{itemize}
\end{itemize}

The category $\D\op$ has a Reedy structure, which gives us, together with the Kan model structure, a model structure on the category $\Fun(\D\op, \SSet)$ with the following properties.
\begin{itemize}
  \item The cofibrations are monomorphisms.

  \item The weak equivalences are level-wise weak homotopy equivalences.

  \item The fibrations are \emph{Reedy fibrations} (\hyperref[def:reedy_fibration]{Definition~\ref*{def:reedy_fibration}}).
\end{itemize}

\subsection{Divisibility of bifunctors}
\label{sss:divisibility_of_bifunctors}

In this section, we recall some key results from \cite{qcats_vs_segal_spaces}. We refer readers there for more information.

Let $\odot\colon \mathcal{E}_{1} \times \category{E}_{2} \to \category{E}_{3}$ be a functor. We will say that $\odot$ is \emph{divisible on the left} if for each $A \in \category{E}_{1}$, the functor $A \odot -$ admits a right adjoint $A \backslash -$. In this case, this construction turns out also to be functorial in $A$; that is, we get a functor
\begin{equation*}
  - \backslash -\colon \category{E}_{1}\op \times \category{E}_{3} \to \category{E}_{2}.
\end{equation*}

Analogously, $\odot\colon \mathcal{E}_{1} \times \mathcal{E}_{2} \to \mathcal{E}_{3}$ is \emph{divisible on the right} if for for each $B \in \category{E}_{2}$, the functor $- \odot B$ admits a right adjoint $- / B$. In this case we get a of two variables
\begin{equation*}
  - / -\colon \category{E}_{3} \times \category{E}_{2}\op \to \category{E}_{1}.
\end{equation*}

\begin{example}
  It will be helpful to keep in mind the cartesian product 
  \begin{equation*}
    - \times -\colon \SSet \times \SSet \to \SSet. 
  \end{equation*}
  In this case, both $A \backslash X$ and $X / A$ are the mapping space $X^{A}$.
\end{example}

If $\odot$ is divisible on both sides, then there is a bijection between maps of the following types:
\begin{equation*}
  A \odot B \to X,\qquad A \to X / B,\qquad B \to A \backslash X.
\end{equation*}
In particular, this implies that the functors $X / -$ and $- \backslash X$ are mutually right adjoint.

If both $\category{E}_{1}$ and $\category{E}_{2}$ are finitely complete and $\category{E}_{3}$ is finitely cocomplete, then from a map $u\colon A \to A'$ in $\category{E}_{1}$, a map $v\colon B \to B'$ in $\category{E}_{2}$, and a map $f\colon X \to Y$ in $\category{E}_{3}$, we can build the following maps.
\begin{itemize}
  \item From the square
    \begin{equation*}
      \begin{tikzcd}
        A \odot B
        \arrow[r]
        \arrow[d]
        & A' \odot B
        \arrow[d]
        \\
        A \odot B'
        \arrow[r]
        & A' \odot B'
      \end{tikzcd}
    \end{equation*}
    we get a map
    \begin{equation*}
      u \odot' v\colon A \odot B' \amalg_{A \odot B} A' \odot B \to A' \odot B'.
    \end{equation*}

  \item From the square
    \begin{equation*}
      \begin{tikzcd}
        A' \backslash X
        \arrow[r]
        \arrow[d]
        & A \backslash X
        \arrow[d]
        \\
        A' \backslash Y
        \arrow[r]
        & A \backslash Y
      \end{tikzcd}
    \end{equation*}
    we get a map
    \begin{equation*}
      \langle u \backslash f \rangle\colon A' \backslash X \to A \backslash X \times_{A \backslash Y} A' \backslash Y
    \end{equation*}

  \item From the square
    \begin{equation*}
      \begin{tikzcd}
        X / B'
        \arrow[r]
        \arrow[d]
        & X / B
        \arrow[d]
        \\
        Y / B'
        \arrow[r]
        & Y / B
      \end{tikzcd}
    \end{equation*}
    we get a map
    \begin{equation*}
      \langle f / v \rangle\colon X / B' \to X / B \times_{Y / B} Y / B'.
    \end{equation*}
\end{itemize}

\begin{proposition}
  \label{prop:equivalent_lifting_problems}
  With the above notation, the following are equivalent adjoint lifting problems:
  \begin{equation*}
    \begin{tikzcd}
      A \odot B' \amalg_{A \odot B} A' \odot B
      \arrow[r]
      \arrow[d]
      & X
      \arrow[d]
      \\
      A' \odot B'
      \arrow[r]
      \arrow[ur, dashed]
      & Y
    \end{tikzcd}
    \qquad
    \begin{tikzcd}
      A
      \arrow[r]
      \arrow[d]
      & X / B'
      \arrow[d]
      \\
      A'
      \arrow[r]
      \arrow[ur, dashed]
      & X / B \times_{Y / B} Y / B'
    \end{tikzcd}
  \end{equation*}
  \begin{equation*}
    \begin{tikzcd}
      B
      \arrow[r]
      \arrow[d]
      & A' \backslash X
      \arrow[d]
      \\
      B'
      \arrow[r]
      \arrow[ur, dashed]
      & A \backslash X \times_{A \backslash Y} A' \backslash Y
    \end{tikzcd}
  \end{equation*}
\end{proposition}


\end{document}
